<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="靠北’s Notes">
<meta property="og:url" content="http://he8090.cn/index.html">
<meta property="og:site_name" content="靠北’s Notes">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="靠北’s Notes">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://he8090.cn/"/>





  <title>靠北’s Notes</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6961312303680db8ea4d5558f73d8325";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">靠北’s Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">我用文字记忆，青春年华。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/12/18/编译iOS的boost库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/18/编译iOS的boost库/" itemprop="url">编译iOS的Boost库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-18T14:11:34+08:00">
                2017-12-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>环境：<br>xcode9<br>mac os 10.13</p>
<p>1、下载boost库并解压<br>2、cd到解压后的文件包内，执行 <figure class="highlight sh"><figcaption><span>bootstrap.sh```（解压后会得到这个脚本文件）。</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">3、执行```./b2``` 编译整个库。</div><div class="line">4、经过一段时间编译后，得到编译后的头文件和库文件。</div><div class="line">5、运行 ```sudo ./b2 install``` 命令 将编译后的库安装到系统默认路径/usr/<span class="built_in">local</span>/include下</div><div class="line">6、这时候得到的库文件可能只是X86_64此类模拟器架构运行的库，如果需要真机库需要在第3步之后按照实际情况运行以下脚本。```sh myBuildBoost.sh</div></pre></td></tr></table></figure></p>
<p>7、运行后会编译出需要架构的库文件，直接将编译完成之后的库文件复制到系统目录下即可。<br>8、xcode调试，依次在<figure class="highlight plain"><figcaption><span>Search path```  和 ```library search path```后添加头文件和库文件路径```/usr/local/include```    ```/usr/local/lib```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">9、在build phases -&gt;link binaru with libray中添加需要的库文件。</div><div class="line">10、在实际真机运行中可能会要求关闭bitcode，关闭即可运行。</div></pre></td></tr></table></figure></p>
<p>myBuildBoost.sh</p>
<p>#!/bin/sh</p>
<h1 id="myBuildBoost-sh"><a href="#myBuildBoost-sh" class="headerlink" title="myBuildBoost.sh"></a>myBuildBoost.sh</h1><h1 id="TestMaster"><a href="#TestMaster" class="headerlink" title="TestMaster"></a>TestMaster</h1><p>#</p>
<h1 id="Created-by-LuoYao-on-2017-10-20"><a href="#Created-by-LuoYao-on-2017-10-20" class="headerlink" title="Created by LuoYao on 2017/10/20."></a>Created by LuoYao on 2017/10/20.</h1><h1 id="Copyright-©-2017年-kim-All-rights-reserved"><a href="#Copyright-©-2017年-kim-All-rights-reserved" class="headerlink" title="Copyright © 2017年 kim. All rights reserved."></a>Copyright © 2017年 kim. All rights reserved.</h1><h1 id="请自行修改路径，cd到boost解压后的目录下"><a href="#请自行修改路径，cd到boost解压后的目录下" class="headerlink" title="请自行修改路径，cd到boost解压后的目录下"></a>请自行修改路径，cd到boost解压后的目录下</h1><p>dir=<code>dirname $0</code><br>cd “/usr/local/boost_1_57_0”</p>
<h1 id="如果库文件已存在，直接退出"><a href="#如果库文件已存在，直接退出" class="headerlink" title="如果库文件已存在，直接退出"></a>如果库文件已存在，直接退出</h1><p>if [ -e ./stage/lib/libboost_date_time.a ]; then<br>echo “libraries exist. no need to build.”<br>exit 0<br>fi</p>
<p>: ${COMPILER:=”clang++”}<br>: ${IPHONE_SDKVERSION:=<code>xcodebuild -showsdks | grep iphoneos | egrep &quot;[[:digit:]]+\.[[:digit:]]+&quot; -o | tail -1</code>}<br>: ${XCODE_ROOT:=<code>xcode-select -print-path</code>}<br>: ${EXTRA_CPPFLAGS:=”-DBOOST_AC_USE_PTHREADS -DBOOST_SP_USE_PTHREADS -stdlib=libc++”}</p>
<p>echo “IPHONE_SDKVERSION: $IPHONE_SDKVERSION”<br>echo “XCODE_ROOT:        $XCODE_ROOT”<br>echo “COMPILER:          $COMPILER”</p>
<p>echo “bootstrap”</p>
<h1 id="此脚本如果是被Xcode调用的话，会因为xcode-export的某些变量导致失败，所以加了env-i。直接在命令行运行此脚本可以把env-i-去掉"><a href="#此脚本如果是被Xcode调用的话，会因为xcode-export的某些变量导致失败，所以加了env-i。直接在命令行运行此脚本可以把env-i-去掉" class="headerlink" title="此脚本如果是被Xcode调用的话，会因为xcode export的某些变量导致失败，所以加了env -i。直接在命令行运行此脚本可以把env -i 去掉"></a>此脚本如果是被Xcode调用的话，会因为xcode export的某些变量导致失败，所以加了env -i。直接在命令行运行此脚本可以把env -i 去掉</h1><h1 id="env-i-bash-bootstrap-sh"><a href="#env-i-bash-bootstrap-sh" class="headerlink" title="env -i bash ./bootstrap.sh"></a>env -i bash ./bootstrap.sh</h1><p>echo “write project-config.jam”</p>
<h1 id="默认生存的project-config-jam是编译Mac版的，这里直接调换掉"><a href="#默认生存的project-config-jam是编译Mac版的，这里直接调换掉" class="headerlink" title="默认生存的project-config.jam是编译Mac版的，这里直接调换掉"></a>默认生存的project-config.jam是编译Mac版的，这里直接调换掉</h1><p>rm project-config.jam<br>cat &gt;&gt; project-config.jam &lt;<eof using="" darwin="" :="" ${iphone_sdkversion}~iphone="" $xcode_root="" toolchains="" xcodedefault.xctoolchain="" usr="" bin="" $compiler="" -arch="" armv7="" armv7s="" arm64="" $extra_cppflags="" <striper=""> <root>$XCODE_ROOT/Platforms/iPhoneOS.platform/Developer<br>: <architecture>arm <target-os>iphone<br>;<br>using darwin : ${IPHONE_SDKVERSION}~iphonesim<br>: $XCODE_ROOT/Toolchains/XcodeDefault.xctoolchain/usr/bin/$COMPILER -arch i386 -arch x86_64 $EXTRA_CPPFLAGS<br>: <striper> <root>$XCODE_ROOT/Platforms/iPhoneSimulator.platform/Developer<br>: <architecture>ia64 <target-os>iphone<br>;<br>EOF</target-os></architecture></root></striper></target-os></architecture></root></eof></p>
<h1 id="上面的代码里，两个using-darwin分别是编译真机版和模拟器版的设置。每多一种CPU架构就要再加一个-arch-xxx。"><a href="#上面的代码里，两个using-darwin分别是编译真机版和模拟器版的设置。每多一种CPU架构就要再加一个-arch-xxx。" class="headerlink" title="上面的代码里，两个using darwin分别是编译真机版和模拟器版的设置。每多一种CPU架构就要再加一个-arch xxx。"></a>上面的代码里，两个using darwin分别是编译真机版和模拟器版的设置。每多一种CPU架构就要再加一个-arch xxx。</h1><p>echo “build boost iphone dev”<br>./bjam -j16 –with-iostreams –with-regex –with-timer –with-exception –with-chrono –with-serialization –with-signals –with-date_time –with-filesystem –with-system –with-thread –build-dir=iphone-build –stagedir=iphone-build/stage toolset=darwin architecture=arm target-os=iphone macosx-version=iphone-${IPHONE_SDKVERSION} define=_LITTLE_ENDIAN link=static stage</p>
<p>echo “build boost iphone sim”<br>./bjam -j16 –with-iostreams –with-regex –with-timer –with-exception –with-chrono –with-serialization –with-signals –with-date_time –with-filesystem –with-system –with-thread –build-dir=iphonesim-build –stagedir=iphonesim-build/stage –toolset=darwin-${IPHONE_SDKVERSION}~iphonesim architecture=ia64 target-os=iphone macosx-version=iphonesim-${IPHONE_SDKVERSION} link=static stage cxxflags=-miphoneos-version-min=7.0</p>
<p>echo “lipo”</p>
<h1 id="把各架构下的库文件合一，以便在xcode里可以少设置些搜索路径。做得更彻底些是各个分库合成一个大库。不过除非是把静态库加入到代码仓库，否则是浪费时间了。要合成的大库话请参考https-gist-github-com-rsobik-7513324原文。"><a href="#把各架构下的库文件合一，以便在xcode里可以少设置些搜索路径。做得更彻底些是各个分库合成一个大库。不过除非是把静态库加入到代码仓库，否则是浪费时间了。要合成的大库话请参考https-gist-github-com-rsobik-7513324原文。" class="headerlink" title="把各架构下的库文件合一，以便在xcode里可以少设置些搜索路径。做得更彻底些是各个分库合成一个大库。不过除非是把静态库加入到代码仓库，否则是浪费时间了。要合成的大库话请参考https://gist.github.com/rsobik/7513324原文。"></a>把各架构下的库文件合一，以便在xcode里可以少设置些搜索路径。做得更彻底些是各个分库合成一个大库。不过除非是把静态库加入到代码仓库，否则是浪费时间了。要合成的大库话请参考<a href="https://gist.github.com/rsobik/7513324原文。" target="_blank" rel="external">https://gist.github.com/rsobik/7513324原文。</a></h1><p>mkdir -p stage/lib<br>lipo -create iphone-build/stage/lib/libboost_iostreams.a iphonesim-build/stage/lib/libboost_iostreams.a -output stage/lib/libboost_iostreams.a<br>lipo -create iphone-build/stage/lib/libboost_regex.a iphonesim-build/stage/lib/libboost_regex.a -output stage/lib/libboost_regex.a<br>lipo -create iphone-build/stage/lib/libboost_timer.a iphonesim-build/stage/lib/libboost_timer.a -output stage/lib/libboost_timer.a<br>lipo -create iphone-build/stage/lib/libboost_exception.a iphonesim-build/stage/lib/libboost_exception.a -output stage/lib/libboost_exception.a<br>lipo -create iphone-build/stage/lib/libboost_chrono.a iphonesim-build/stage/lib/libboost_chrono.a -output stage/lib/libboost_chrono.a<br>lipo -create iphone-build/stage/lib/libboost_serialization.a iphonesim-build/stage/lib/libboost_serialization.a -output stage/lib/libboost_serialization.a<br>lipo -create iphone-build/stage/lib/libboost_signals.a iphonesim-build/stage/lib/libboost_signals.a -output stage/lib/libboost_signals.a<br>lipo -create iphone-build/stage/lib/libboost_atomic.a iphonesim-build/stage/lib/libboost_atomic.a -output stage/lib/libboost_atomic.a<br>lipo -create iphone-build/stage/lib/libboost_wserialization.a iphonesim-build/stage/lib/libboost_wserialization.a -output stage/lib/libboost_wserialization.a<br>lipo -create iphone-build/stage/lib/libboost_date_time.a iphonesim-build/stage/lib/libboost_date_time.a -output stage/lib/libboost_date_time.a<br>lipo -create iphone-build/stage/lib/libboost_filesystem.a iphonesim-build/stage/lib/libboost_filesystem.a -output stage/lib/libboost_filesystem.a<br>lipo -create iphone-build/stage/lib/libboost_system.a iphonesim-build/stage/lib/libboost_system.a -output stage/lib/libboost_system.a<br>lipo -create iphone-build/stage/lib/libboost_thread.a iphonesim-build/stage/lib/libboost_thread.a -output stage/lib/libboost_thread.a</p>
<h1 id="库文件最终放在-stage-lib-下"><a href="#库文件最终放在-stage-lib-下" class="headerlink" title="库文件最终放在./stage/lib/下"></a>库文件最终放在./stage/lib/下</h1><p>echo “Completed successfully”</p>
<p>```</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/09/12/iOS开发者和人工智能/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/12/iOS开发者和人工智能/" itemprop="url">iOS开发者和人工智能</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-12T09:42:49+08:00">
                2017-09-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近看到一篇文章，主要说iOS开发者与人工智能的联系以及我们能在人工智能领域做些什么。这里讲的iOS开发者其实也可以看做所有移动开发者，在人工智能时代来临之际，我们作为技术从业者应该也应该知晓在未来人工智能发达我们能做什么，或者讲人工智能会危及到我们开发者什么。毫无疑问讲，人工智能肯定越来越发达，其实现在在一些常见的APP或者第三方SDK已经在提供一些近视人工智能的服务和应用。比如：科大讯飞语音听写、转写、微软小冰、Siri这些已经在器领域广泛应用。</p>
<p>作为iOS开发者，今年WWDC Apple提出的Core ML就是作为iOS可以使用已有训练模型或者可以新建机器训练模型。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/08/17/第一次露营/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/17/第一次露营/" itemprop="url">第一次露营</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-17T14:59:13+08:00">
                2017-08-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人随笔/" itemprop="url" rel="index">
                    <span itemprop="name">个人随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近想到要写一些关于生活的文章，那么我就从最近的露营开始。<br>当提到露营很多人想到的是浪漫、随心、惬意。但，其实第一次露营的经历告诉我，前面的那些想法只是存在想象和影视之中，现实中要考虑因素和情况真的是太多了，后面我会提到这些。</p>
<p>说说这次我们是怎么想到露营的吧，其实准备很匆忙，周五的时候有一对朋友约我们要不周末去天台山露营和欣赏萤火虫，因为之前已经约了其他朋友周末去国色天香水上乐园玩水，但是听到露营我心里是很想去的。我和媳妇儿商量了一下决定要勇敢的尝试下，当决定去的时候已经是周五上午的十点二十左右了。</p>
<p>决定了我们就开始准备，要知道之前我们没有一点户外露营经验甚至连帐篷都没准备，买都不知道买哪一种帐篷合适。于是马上上JD，留给我挑帐篷的时间不多了，大家都知道JD自营上午11点之前下单当天会送到。所以我在这半个小时时间先后购买了帐篷、气垫床、防潮垫什么的。</p>
<p>到了晚间帐篷送到了，送货送的很早，感谢媳妇儿一个人去收那么重的帐篷和一些东西。当晚到了之后在客厅尝试大了一下比想象中大的多（1.5m * 2m），自动帐篷搭建都方便，感觉还可以比较满意，其实坑的在后面。</p>
<p>第二天，周六，约了朋友（这里用AG和AK来表示吧）10点在小区外会合，2车5人（还有AG的妹妹，这里用AGM表示吧）带着准备好的零食装备出发了，周六10点多出发去天台山一路上肯定很堵车，大成都川A大军不是盖的，到处都是川A堵着。一路跌跌撞撞到了天台山下，讲真的有点失望，一路上交警封路或者强制分流，造成了到处都是拥堵，你遵纪守法老实排队等候，旁边的车还是会逆行到前方去插队，出游看素质，所以大家都还有很大的提升空间。</p>
<p>成雅高速上，前方有施工和车祸<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9784.JPG" alt="成雅高速上，前方有施工和车祸。"></p>
<p>一路前行到景区门口，得到第一个坏消息，车不能开上山，心里一万匹马奔腾而过。是不是代表我带的帐篷，零食，桶装矿泉水全部要背上山。买了票之后又有一个重磅坏消息，上山不允许露营。其实这一刻我心累的，因为堵车关系到达天台山山下已经是下午三点左右了，和朋友们匆忙吃完午饭搭着摆渡车来到景区门口，搞了这么多给我来这一套，我吃饱了墙都不服就服你。</p>
<p>快到天台山了，一路封路和绕行<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9785.JPG" alt="快到天台山了，一路封路和绕行"></p>
<p>在休息大厅，遇到了天台山农家乐（现在叫民宿）的人拉客，我们几经讨论选择了她家，也把帐篷什么的放到她那里帮我们带上山，我们一行轻车简从坐着景区提供的交通车上山。</p>
<p>网上找到的游玩图，仅供参考，时间短走不完。<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_1763.JPG" alt="网上找到的游玩图，仅供参考，时间短走不完。"></p>
<p>这是我们准备游玩的路线，一两天时间是耍不好的，更多的人来这里只是为了避暑。玩不重要，凉快最重<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9788.JPG" alt="这是我们准备游玩的路线，一两天时间是耍不好的，更多的人来这里只是为了避暑。玩不重要，凉快最重要。"></p>
<p>说实话，开发过的景区对于我们这种只想简单休息放松的人来说确实是痛苦，不知道哪里景色好，不知道哪个地方在哪，唯一的景区简易导游图是在门票背面，不详细全得靠运气。</p>
<p>停车场到游客中心的摆渡车<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/WechatIMG16.jpeg" alt="停车场到游客中心的摆渡车"></p>
<p>到站了，走路到农家乐，现在有个时髦的名词叫民宿<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9790.JPG" alt="上山了下车之后 风景1"><br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9791.JPG" alt="上山了下车之后 风景2"></p>
<p>两口子来张自拍，不用美颜做真实的自己  哈哈哈哈<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9792.JPG" alt="来张自拍"></p>
<p>自拍和他拍，滤镜的价值瞬间体现。<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/WechatIMG19.jpeg" alt="他拍"></p>
<p>民宿一角，仿佛回到乡下老家 累了休息<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/WechatIMG17.jpeg" alt="名宿一角"></p>
<p>走上山，到了农家乐老板说的那个位置下车步行一段距离达到农家乐，恩，对于这个农家乐的映象和感受也就一般吧，出门在外不在乎这些。坐在农家乐里有一种回到老家的感觉，因为老家在乡下回家就会坐在院坝或者哪里，这里的感觉一样。休息了会，我们决定拦车上山。后来我们又有新的伙伴加入了（这里叫AJ吧）。</p>
<p>话说是美食广场，新修的一些建筑<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9800.JPG" alt="建筑1"><br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9799.JPG" alt="建筑2"><br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9798.JPG" alt="建筑3"><br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9797.JPG" alt="建筑4"></p>
<p>其实很无聊，回忆小时候吧<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/WechatIMG20.jpeg" alt="游戏1"><br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9801.JPG" alt="游戏1"></p>
<p>直接到晚上我们准备找地方搭帐篷了，因为我为了这次露营刚买的帐篷还没用怎么能放弃呢，到了晚上在另一位本地酒店经营者的建议下我们来到了这个地方：花石林。是不是代表石头像花一样开着我不知道，因为到时天已经黑了。匆匆搭好帐篷，第一次买的帐篷没有经验所以买的自动帐篷，确实也方便几秒钟打开。其实这样子的帐篷很坑，后面我细说。</p>
<p>搭完帐篷之后，去了一家酒店点菜吃饭。晚饭之后，沿着河边（姑且叫河边吧）寻找萤火虫，忙活了一个多小时和想象中一样，萤火虫很少很少几乎没有，第二天在下山过程中才知道我们来错地方了。接近12点了，这一天确实很长，吃完西瓜各自回营。三顶帐篷6个人就在这对付了。</p>
<p>晚餐前大摄影师拍照<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/WechatIMG18.jpeg" alt="晚餐"></p>
<p>其实写这篇文章主要是想写下这里我的感受，总感觉我要铺垫点东西和场景，所以前面废话太多了。各自回到帐篷准备休息了，这时候老天不作美呀，下雨，对就是下雨了，感觉还挺大。刚开始我对我刚买的帐篷质量还是挺放心的，但没多久我就感觉到了不对劲，帐篷里感觉有水汽，刚开始还觉得是水蒸气什么的，随着雨水越来越多，发现帐篷顶部的接缝处有点水在滴，滴在我的身上。这个时候为了晚上能够继续睡下去只有出帐篷去看下到底什么情况，出去后看了才知道，还是没经验呀，买了个自动帐篷，所以在顶部会有一个杆连接骨架，但是帐篷布也是在这里几路会和，如果做工不怎样肯定会漏水。而且这个帐篷顶部是平的，意味着雨量大的话肯定会有积水走不掉会积压在这里，这也是漏水的原因。我用随身带的垃圾袋放在顶上，减少雨水的接触面积来减少滴水，处理完成之后雨也停了。还是得感谢老天没让我湿着睡一晚。也感谢这场雨，我回去之后马上就把帐篷退掉了，不防水的帐篷和不防水的伞有什么区别。退，必须退。</p>
<p>就是那个中间挂帐篷灯的位置，往下走水<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9809.JPG" alt="就是那个中间挂帐篷灯的位置，往下走水"></p>
<p>媳妇儿用卫生纸去包起来<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9814.JPG" alt="媳妇儿用卫生纸去包起来"><br>挺认真哈<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9815.JPG" alt="挺认真哈"></p>
<p>晚上出来铺垃圾袋<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9811.JPG" alt="晚上出来铺垃圾袋"></p>
<p>事实证明这种帐篷在雨中扛不住的，这是盖了塑料垃圾袋之后了<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9812.JPG" alt="这种帐篷在雨中扛不住的"></p>
<p>当晚雨下过之后，山里下起了雾，就会一直有声音噼里啪啦的，还有各种鸟叫。因为是和媳妇儿都是第一次露营没经验，胆子也小不敢睡。深夜下雾的声音让我俩总感觉有脚步声靠近，我俩手拉着手不敢说话，相互用手指轻捏对方传递内心恐惧，什么都怕。这个时候人的心里真的需要承受许多东西，这时候会觉得大自然真的是很强大，我们太渺小。后来身体受不了了睡着了，第二天来看这个地方还挺好的，但昨夜确实没睡好。</p>
<p>早上起来之后，对景色无感，就这样大家8点钟坐着交通车下山了。到达山下游客中心时已经至少有几百人在排队候车上山了，心中不免感慨万千。</p>
<p>第二天早上起来，天气不错，三顶帐篷来个合影<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9821.JPG" alt="帐篷还是没垮"></p>
<p>帐篷内景，其实睡着还是挺舒服，柔软度还是可以的<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9828.JPG" alt="帐篷内景"></p>
<p>白天看帐篷，骨架外漏，这个设计扛不住水的<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9824.JPG" alt="白天看帐篷，骨架外漏，这个设计扛不住水的"></p>
<p>起来的太早，准备下山了。景区的大马路还很平静，游客还比较少<br><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/20170805_tiantaishan/IMG_9816.JPG" alt="马路"></p>
<p>这次体验不见得多精彩，但值得被记住。同时也感谢朋友们的帮助。这件事后我觉得旅行的意义就在于，你不知道下一秒你看到的风景是什么，怀着美好的愿景去寻找，虽然风景不美丽但是沿途景象也能让你陶醉。就像这一次不完美，但是我经历了我感受了很多东西，很多事情只有经历后才有感觉才懂得珍惜。</p>
<p>谨以此文纪念青春。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/07/25/转《录取通知书：从此后，父母只剩背影，故乡只有夏冬》/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/25/转《录取通知书：从此后，父母只剩背影，故乡只有夏冬》/" itemprop="url">转《录取通知书：从此后，父母只剩背影，故乡只有夏冬》</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-25T10:51:36+08:00">
                2017-07-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/好文转载/" itemprop="url" rel="index">
                    <span itemprop="name">好文转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>这是一篇深度好文，突出了一个年轻人成长的内心和对故乡的情感。值得一看。</p>
</blockquote>
<p><img src="https://github.com/misszero8090/he8090_blog/blob/master/img/转《录取通知书：从此后，父母只剩背影，故乡只有夏冬》.jpg?raw=true" alt="转《录取通知书：从此后，父母只剩背影，故乡只有夏冬》"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/07/12/hpple的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/hpple的使用/" itemprop="url">hpple的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T09:30:20+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> hpple在网页解析方面有很重要的作用，本次项目中用到合作单位提供的一个信号标识，但是对方不提供接口只提供HTML网页解析，所以客户端只能拿到HTML源码之后对HTML源码进行解析，拿到自己需要的数据。</p>
<blockquote>
<p>demo地址：<a href="https://github.com/misszero8090/httpParse" target="_blank" rel="external">https://github.com/misszero8090/httpParse</a></p>
</blockquote>
<ul>
<li><p>先下载hpple库，推荐使用cocoapods导入，但因我们项目原因，这里重点说后者，手动导入。去github下载包，地址：<a href="https://github.com/topfunky/hpple" target="_blank" rel="external">https://github.com/topfunky/hpple</a></p>
</li>
<li><p>将库引入project , 添加静态库<code>libxml2.2.dylib</code>，注意我使用的是<code>xcode8.3.3 iOS10</code>开发，默认情况下是<code>.tbd</code>， 因为库需要用<code>.dylib</code>，所以在/usr/lib目录下还有.dylib文件。</p>
</li>
<li><p>在<code>header search path</code>设置<code>$(SDKROOT)/usr/lib/libxml2</code>。</p>
</li>
<li>在<code>user Heather search path</code>设置<code>$(SDKROOT)/usr/include/libxml2</code></li>
<li><p>在<code>FrameWork search path</code>设置<code>/usr/lib/libxml2.2.dylib</code></p>
</li>
<li><p>以上设置完成之后，导入<code>#import &quot;TFHpple.h&quot;</code></p>
</li>
</ul>
<p>Objective-C解析HTML&lt;后附 RSSI.html源代码&gt;<br>拿到rssi后面的值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">NSString *htmlPath = [[NSBundle mainBundle] pathForResource:@&quot;RSSI&quot; ofType:@&quot;html&quot;];</div><div class="line">    NSData *htmlData = [NSData dataWithContentsOfFile:htmlPath];</div><div class="line"></div><div class="line">    TFHpple *doc = [[TFHpple alloc] initWithHTMLData:htmlData];</div><div class="line">    NSArray *elements = [doc searchWithXPathQuery:@&quot;//fieldset[@class=&apos;cbi-section&apos;]&quot;];</div><div class="line"></div><div class="line">    for (TFHppleElement *elment in elements) &#123;</div><div class="line">    for (TFHppleElement *el in [elment children]) &#123;</div><div class="line"></div><div class="line">        NSArray *els =  [el searchWithXPathQuery:@&quot;//table&quot;];</div><div class="line">        for (TFHppleElement *e in els) &#123;</div><div class="line">            for (TFHppleElement *table in [e children]) &#123;</div><div class="line"></div><div class="line">                NSArray *tables = [table children];</div><div class="line">                for (TFHppleElement *tr in tables) &#123;</div><div class="line"></div><div class="line">                    if ([[tr text] isEqualToString:@&quot;RSSI&quot;]) &#123;</div><div class="line">                        NSUInteger index = [tables indexOfObject:tr];</div><div class="line">                        NSLog(@&quot;text:%@&quot;,[tr text]);</div><div class="line">                        NSLog(@&quot;index:%ld&quot;,index);</div><div class="line"></div><div class="line">                        TFHppleElement *rssi = tables[index + 1];</div><div class="line"></div><div class="line">                        NSLog(@&quot;rssi:%@&quot;,[rssi text]);</div><div class="line">                    &#125;  </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;    </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//方法2：硬拿 &lt;知道元素的位置，且网页结构不会发生改变&gt;</div><div class="line">TFHppleElement *element = elements[2];</div><div class="line">NSArray *els = [element children];</div><div class="line">TFHppleElement *el = els[3];</div><div class="line">NSArray *es = [el children];</div><div class="line">TFHppleElement *e = es[9];</div><div class="line">NSArray *ls = [e children];</div><div class="line">TFHppleElement *l = ls.lastObject;</div><div class="line"> NSLog(@&quot;html:%@&quot;,[l text]);</div></pre></td></tr></table></figure>
<p>附：RSSI.HTML文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</div><div class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;zh-cn&quot; lang=&quot;zh-cn&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</div><div class="line">&lt;meta http-equiv=&quot;Content-Script-Type&quot; content=&quot;text/javascript&quot; /&gt;</div><div class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;/luci-static/openwrt.org/cascade.css&quot; /&gt;</div><div class="line">&lt;!--[if IE 6]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;/luci-static/openwrt.org/ie6.css&quot; /&gt;&lt;![endif]--&gt;</div><div class="line">&lt;!--[if IE 7]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;/luci-static/openwrt.org/ie7.css&quot; /&gt;&lt;![endif]--&gt;</div><div class="line">&lt;!--[if IE 8]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;/luci-static/openwrt.org/ie8.css&quot; /&gt;&lt;![endif]--&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/luci-static/resources/xhr.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;title&gt;NHRT - 总览 - LuCI&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body class=&quot;lang_zh-cn&quot;&gt;</div><div class="line"></div><div class="line">&lt;p class=&quot;skiplink&quot;&gt;</div><div class="line">&lt;span id=&quot;skiplink1&quot;&gt;&lt;a href=&quot;#navigation&quot;&gt;跳转到导航&lt;/a&gt;&lt;/span&gt;</div><div class="line">&lt;span id=&quot;skiplink2&quot;&gt;&lt;a href=&quot;#content&quot;&gt;跳到内容&lt;/a&gt;&lt;/span&gt;</div><div class="line">&lt;/p&gt;</div><div class="line"></div><div class="line">&lt;div id=&quot;menubar&quot;&gt;</div><div class="line">&lt;h2 class=&quot;navigation&quot;&gt;&lt;a id=&quot;navigation&quot; name=&quot;navigation&quot;&gt;导航&lt;/a&gt;&lt;/h2&gt;</div><div class="line"></div><div class="line">&lt;div class=&quot;hostinfo&quot;&gt;</div><div class="line">	NHRT | Cobra  P015C005B025 |</div><div class="line">	负载: 0.45 0.47 0.21</div><div class="line">	&lt;span id=&quot;xhr_poll_status&quot; style=&quot;display:none&quot; onclick=&quot;XHR.running() ? XHR.halt() : XHR.run()&quot;&gt;</div><div class="line">		| 自动刷新:</div><div class="line">		&lt;span id=&quot;xhr_poll_status_on&quot;&gt;开&lt;/span&gt;</div><div class="line">		&lt;span id=&quot;xhr_poll_status_off&quot; style=&quot;display:none&quot;&gt;关&lt;/span&gt;</div><div class="line">	&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;div id=&quot;savemenu&quot;&gt;</div><div class="line">	&lt;a href=&quot;#&quot;&gt;修改数: 0&lt;/a&gt;</div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;div id=&quot;maincontainer&quot;&gt;</div><div class="line">	&lt;div id=&quot;tabmenu&quot;&gt;</div><div class="line"></div><div class="line">	&lt;div class=&quot;tabmenu1&quot;&gt;</div><div class="line">	&lt;ul class=&quot;tabmenu l1&quot;&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-status active&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/&quot;&gt;状态&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-system&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/system/&quot;&gt;系统&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-services&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/services/&quot;&gt;服务&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-network&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/network/&quot;&gt;网络&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-logout&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/logout/&quot;&gt;退出&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">	&lt;/ul&gt;</div><div class="line">	&lt;br style=&quot;clear:both&quot; /&gt;</div><div class="line"></div><div class="line">	&lt;div class=&quot;tabmenu2&quot;&gt;</div><div class="line">	&lt;ul class=&quot;tabmenu l2&quot;&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-overview active&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/overview/&quot;&gt;总览&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-iptables&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/iptables/&quot;&gt;防火墙&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-routes&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/routes/&quot;&gt;路由表&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-syslog&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/syslog/&quot;&gt;系统日志&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-dmesg&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/dmesg/&quot;&gt;内核日志&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-modemlog&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/modemlog/&quot;&gt;Modem日志&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-rules&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/rules/&quot;&gt;路由规则&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">			&lt;li class=&quot;tabmenu-item-realtime&quot;&gt;</div><div class="line">				&lt;a href=&quot;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b/admin/status/realtime/&quot;&gt;实时信息&lt;/a&gt;</div><div class="line">			&lt;/li&gt;</div><div class="line"></div><div class="line">	&lt;/ul&gt;</div><div class="line">	&lt;br style=&quot;clear:both&quot; /&gt;</div><div class="line"></div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">	&lt;/div&gt;</div><div class="line"></div><div class="line">	&lt;div id=&quot;maincontent&quot;&gt;</div><div class="line">		&lt;noscript&gt;</div><div class="line">			&lt;div class=&quot;errorbox&quot;&gt;</div><div class="line">				&lt;strong&gt;需要Java Script！&lt;/strong&gt;&lt;br /&gt;</div><div class="line">				LUCI的正常运行需要开启浏览器的Java Script支持。</div><div class="line">			&lt;/div&gt;</div><div class="line">		&lt;/noscript&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/luci-static/resources/cbi.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;//&lt;![CDATA[</div><div class="line">	function progressbar(v, m)</div><div class="line">	&#123;</div><div class="line">		var vn = parseInt(v) || 0;</div><div class="line">		var mn = parseInt(m) || 100;</div><div class="line">		var pc = Math.floor((100 / mn) * vn);</div><div class="line"></div><div class="line">		return String.format(</div><div class="line">			&apos;&lt;div style=&quot;width:200px; position:relative; border:1px solid #999999&quot;&gt;&apos; +</div><div class="line">				&apos;&lt;div style=&quot;background-color:#CCCCCC; width:%d%%; height:15px&quot;&gt;&apos; +</div><div class="line">					&apos;&lt;div style=&quot;position:absolute; left:0; top:0; text-align:center; width:100%%; color:#000000&quot;&gt;&apos; +</div><div class="line">						&apos;&lt;small&gt;%s / %s (%d%%)&lt;/small&gt;&apos; +</div><div class="line">					&apos;&lt;/div&gt;&apos; +</div><div class="line">				&apos;&lt;/div&gt;&apos; +</div><div class="line">			&apos;&lt;/div&gt;&apos;, pc, v, m, pc</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	var wifidevs = null;</div><div class="line">	var arptable = null;</div><div class="line"></div><div class="line">	XHR.poll(5, &apos;/cgi-bin/luci/;stok=d5b2f26bea057631a936bc623259991b&apos;, &#123; status: 1 &#125;,</div><div class="line">		function(x, info)</div><div class="line">		&#123;</div><div class="line">			var si = document.getElementById(&apos;wan4_i&apos;);</div><div class="line">			var ss = document.getElementById(&apos;wan4_s&apos;);</div><div class="line">			var ifc = info.wan;</div><div class="line"></div><div class="line">			if (ifc &amp;&amp; ifc.ifname )</div><div class="line">			&#123;</div><div class="line">				var s = String.format(</div><div class="line">					&apos;&lt;strong&gt;类型: &lt;/strong&gt;%s&lt;br /&gt;&apos; +</div><div class="line">					&apos;&lt;strong&gt;地址: &lt;/strong&gt;%s&lt;br /&gt;&apos; +</div><div class="line">					&apos;&lt;strong&gt;掩码: &lt;/strong&gt;%s&lt;br /&gt;&apos; +</div><div class="line">					&apos;&lt;strong&gt;网关: &lt;/strong&gt;%s&lt;br /&gt;&apos;,</div><div class="line">						ifc.proto,</div><div class="line">						(ifc.ipaddr) ? ifc.ipaddr : &apos;0.0.0.0&apos;,</div><div class="line">						(ifc.netmask &amp;&amp; ifc.netmask != ifc.ipaddr) ? ifc.netmask : &apos;255.255.255.255&apos;,</div><div class="line">						(ifc.gwaddr) ? ifc.gwaddr : &apos;0.0.0.0&apos;</div><div class="line">				);</div><div class="line"></div><div class="line">				for (var i = 0; i &lt; ifc.dns.length; i++)</div><div class="line">				&#123;</div><div class="line">					s += String.format(</div><div class="line">						&apos;&lt;strong&gt;DNS %d: &lt;/strong&gt;%s&lt;br /&gt;&apos;,</div><div class="line">						i + 1, ifc.dns[i]</div><div class="line">					);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (ifc.expires &gt; -1)</div><div class="line">				&#123;</div><div class="line">					s += String.format(</div><div class="line">						&apos;&lt;strong&gt;到期时间: &lt;/strong&gt;%t&lt;br /&gt;&apos;,</div><div class="line">						ifc.expires</div><div class="line">					);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (ifc.uptime &gt; 0)</div><div class="line">				&#123;</div><div class="line">					s += String.format(</div><div class="line">						&apos;&lt;strong&gt;已连接: &lt;/strong&gt;%t&lt;br /&gt;&apos;,</div><div class="line">						ifc.uptime</div><div class="line">					);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				ss.innerHTML = String.format(&apos;&lt;small&gt;%s&lt;/small&gt;&apos;, s);</div><div class="line">				si.innerHTML = String.format(</div><div class="line">					&apos;&lt;img src=&quot;/luci-static/resources/icons/ethernet.png&quot; /&gt;&apos; +</div><div class="line">					&apos;&lt;br /&gt;&lt;small&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/small&gt;&apos;,</div><div class="line">						ifc.link, ifc.ifname</div><div class="line">				);</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				si.innerHTML = &apos;&lt;img src=&quot;/luci-static/resources/icons/ethernet_disabled.png&quot; /&gt;&lt;br /&gt;&lt;small&gt;?&lt;/small&gt;&apos;;</div><div class="line">				ss.innerHTML = &apos;&lt;em&gt;未连接&lt;/em&gt;&apos;;</div><div class="line">			&#125;</div><div class="line"></div><div class="line"></div><div class="line">			var si6 = document.getElementById(&apos;wan6_i&apos;);</div><div class="line">			var ss6 = document.getElementById(&apos;wan6_s&apos;);</div><div class="line">			var ifc6 = info.wan6;</div><div class="line"></div><div class="line">			if (ifc6 &amp;&amp; ifc6.ifname )</div><div class="line">			&#123;</div><div class="line">				var s = String.format(</div><div class="line">					&apos;&lt;strong&gt;地址: &lt;/strong&gt;%s&lt;br /&gt;&apos; +</div><div class="line">					&apos;&lt;strong&gt;网关: &lt;/strong&gt;%s&lt;br /&gt;&apos;,</div><div class="line">						(ifc6.ip6addr) ? ifc6.ip6addr : &apos;::&apos;,</div><div class="line">						(ifc6.gw6addr) ? ifc6.gw6addr : &apos;::&apos;</div><div class="line">				);</div><div class="line"></div><div class="line">				for (var i = 0; i &lt; ifc6.dns.length; i++)</div><div class="line">				&#123;</div><div class="line">					s += String.format(</div><div class="line">						&apos;&lt;strong&gt;DNS %d: &lt;/strong&gt;%s&lt;br /&gt;&apos;,</div><div class="line">						i + 1, ifc6.dns[i]</div><div class="line">					);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (ifc6.uptime &gt; 0)</div><div class="line">				&#123;</div><div class="line">					s += String.format(</div><div class="line">						&apos;&lt;strong&gt;已连接: &lt;/strong&gt;%t&lt;br /&gt;&apos;,</div><div class="line">						ifc6.uptime</div><div class="line">					);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				ss6.innerHTML = String.format(&apos;&lt;small&gt;%s&lt;/small&gt;&apos;, s);</div><div class="line">				si6.innerHTML = String.format(</div><div class="line">					&apos;&lt;img src=&quot;/luci-static/resources/icons/ethernet.png&quot; /&gt;&apos; +</div><div class="line">					&apos;&lt;br /&gt;&lt;small&gt;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&lt;/small&gt;&apos;,</div><div class="line">						ifc6.link, ifc6.ifname</div><div class="line">				);</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				si6.innerHTML = &apos;&lt;img src=&quot;/luci-static/resources/icons/ethernet_disabled.png&quot; /&gt;&lt;br /&gt;&lt;small&gt;?&lt;/small&gt;&apos;;</div><div class="line">				ss6.innerHTML = &apos;&lt;em&gt;未连接&lt;/em&gt;&apos;;</div><div class="line">			&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">			var ls = document.getElementById(&apos;lease_status_table&apos;);</div><div class="line">			if (ls)</div><div class="line">			&#123;</div><div class="line">				/* clear all rows */</div><div class="line">				while( ls.rows.length &gt; 1 )</div><div class="line">					ls.rows[0].parentNode.deleteRow(1);</div><div class="line"></div><div class="line">				for( var i = 0; i &lt; info.leases.length; i++ )</div><div class="line">				&#123;</div><div class="line">					var timestr;</div><div class="line"></div><div class="line">					if (info.leases[i].expires &lt;= 0)</div><div class="line">						timestr = &apos;&lt;em&gt;过期时间&lt;/em&gt;&apos;;</div><div class="line">					else</div><div class="line">						timestr = String.format(&apos;%t&apos;, info.leases[i].expires);</div><div class="line"></div><div class="line">					var tr = ls.rows[0].parentNode.insertRow(-1);</div><div class="line">						tr.className = &apos;cbi-section-table-row cbi-rowstyle-&apos; + ((i % 2) + 1);</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = info.leases[i].hostname ? info.leases[i].hostname : &apos;?&apos;;</div><div class="line">					tr.insertCell(-1).innerHTML = info.leases[i].ipaddr;</div><div class="line">					tr.insertCell(-1).innerHTML = info.leases[i].macaddr;</div><div class="line">					tr.insertCell(-1).innerHTML = timestr;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if( ls.rows.length == 1 )</div><div class="line">				&#123;</div><div class="line">					var tr = ls.rows[0].parentNode.insertRow(-1);</div><div class="line">						tr.className = &apos;cbi-section-table-row&apos;;</div><div class="line"></div><div class="line">					var td = tr.insertCell(-1);</div><div class="line">						td.colSpan = 4;</div><div class="line">						td.innerHTML = &apos;&lt;em&gt;&lt;br /&gt;没有已分配的租约。&lt;/em&gt;&apos;;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			var ls6 = document.getElementById(&apos;lease6_status_table&apos;);</div><div class="line">			if (ls6 &amp;&amp; info.leases6)</div><div class="line">			&#123;</div><div class="line">				ls6.parentNode.style.display = &apos;block&apos;;</div><div class="line"></div><div class="line">				/* clear all rows */</div><div class="line">				while( ls6.rows.length &gt; 1 )</div><div class="line">					ls6.rows[0].parentNode.deleteRow(1);</div><div class="line"></div><div class="line">				for( var i = 0; i &lt; info.leases6.length; i++ )</div><div class="line">				&#123;</div><div class="line">					var timestr;</div><div class="line"></div><div class="line">					if (info.leases6[i].expires &lt;= 0)</div><div class="line">						timestr = &apos;&lt;em&gt;过期时间&lt;/em&gt;&apos;;</div><div class="line">					else</div><div class="line">						timestr = String.format(&apos;%t&apos;, info.leases6[i].expires);</div><div class="line"></div><div class="line">					var tr = ls6.rows[0].parentNode.insertRow(-1);</div><div class="line">						tr.className = &apos;cbi-section-table-row cbi-rowstyle-&apos; + ((i % 2) + 1);</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = info.leases6[i].hostname ? info.leases6[i].hostname : &apos;?&apos;;</div><div class="line">					tr.insertCell(-1).innerHTML = info.leases6[i].ip6addr;</div><div class="line">					tr.insertCell(-1).innerHTML = info.leases6[i].duid;</div><div class="line">					tr.insertCell(-1).innerHTML = timestr;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if( ls6.rows.length == 1 )</div><div class="line">				&#123;</div><div class="line">					var tr = ls6.rows[0].parentNode.insertRow(-1);</div><div class="line">						tr.className = &apos;cbi-section-table-row&apos;;</div><div class="line"></div><div class="line">					var td = tr.insertCell(-1);</div><div class="line">						td.colSpan = 4;</div><div class="line">						td.innerHTML = &apos;&lt;em&gt;&lt;br /&gt;没有已分配的租约。&lt;/em&gt;&apos;;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">			var assoclist = [ ];</div><div class="line"></div><div class="line">			var ws = document.getElementById(&apos;wifi_status_table&apos;);</div><div class="line">			if (ws)</div><div class="line">			&#123;</div><div class="line">				var wsbody = ws.rows[0].parentNode;</div><div class="line">				while (ws.rows.length &gt; 0)</div><div class="line">					wsbody.deleteRow(0);</div><div class="line"></div><div class="line">				for (var didx = 0; didx &lt; info.wifinets.length; didx++)</div><div class="line">				&#123;</div><div class="line">					var dev = info.wifinets[didx];</div><div class="line"></div><div class="line">					var tr = wsbody.insertRow(-1);</div><div class="line">					var td;</div><div class="line"></div><div class="line">					td = tr.insertCell(-1);</div><div class="line">					td.width     = &quot;33%&quot;;</div><div class="line">					td.innerHTML = dev.name;</div><div class="line">					td.style.verticalAlign = &quot;top&quot;;</div><div class="line"></div><div class="line">					td = tr.insertCell(-1);</div><div class="line"></div><div class="line">					var s = &apos;&apos;;</div><div class="line"></div><div class="line">					for (var nidx = 0; nidx &lt; dev.networks.length; nidx++)</div><div class="line">					&#123;</div><div class="line">						var net = dev.networks[nidx];</div><div class="line">						var is_assoc = (net.bssid != &apos;00:00:00:00:00:00&apos; &amp;&amp; net.channel &amp;&amp; !net.disabled);</div><div class="line"></div><div class="line">						var icon;</div><div class="line">						if (!is_assoc)</div><div class="line">							icon = &quot;/luci-static/resources/icons/signal-none.png&quot;;</div><div class="line">						else if (net.quality == 0)</div><div class="line">							icon = &quot;/luci-static/resources/icons/signal-0.png&quot;;</div><div class="line">						else if (net.quality &lt; 25)</div><div class="line">							icon = &quot;/luci-static/resources/icons/signal-0-25.png&quot;;</div><div class="line">						else if (net.quality &lt; 50)</div><div class="line">							icon = &quot;/luci-static/resources/icons/signal-25-50.png&quot;;</div><div class="line">						else if (net.quality &lt; 75)</div><div class="line">							icon = &quot;/luci-static/resources/icons/signal-50-75.png&quot;;</div><div class="line">						else</div><div class="line">							icon = &quot;/luci-static/resources/icons/signal-75-100.png&quot;;</div><div class="line"></div><div class="line">						s += String.format(</div><div class="line">							&apos;&lt;table&gt;&lt;tr&gt;&lt;td style=&quot;text-align:center; width:32px; padding:3px&quot;&gt;&apos; +</div><div class="line">								&apos;&lt;img src=&quot;%s&quot; title=&quot;信号: %d dBm / 噪声: %d dBm&quot; /&gt;&apos; +</div><div class="line">								&apos;&lt;br /&gt;&lt;small&gt;%d%%&lt;/small&gt;&apos; +</div><div class="line">							&apos;&lt;/td&gt;&lt;td style=&quot;text-align:left; padding:3px&quot;&gt;&lt;small&gt;&apos; +</div><div class="line">								&apos;&lt;strong&gt;SSID:&lt;/strong&gt; &lt;a href=&quot;%s&quot;&gt;%h&lt;/a&gt;&lt;br /&gt;&apos; +</div><div class="line">								&apos;&lt;strong&gt;模式:&lt;/strong&gt; %s&lt;br /&gt;&apos; +</div><div class="line">								&apos;&lt;strong&gt;信道:&lt;/strong&gt; %d (%.3f GHz)&lt;br /&gt;&apos; +</div><div class="line">								&apos;&lt;strong&gt;传输速率:&lt;/strong&gt; %s Mbit/s&lt;br /&gt;&apos;,</div><div class="line">								icon, net.signal, net.noise,</div><div class="line">								net.quality,</div><div class="line">								net.link, net.ssid,</div><div class="line">								net.mode,</div><div class="line">								net.channel, net.frequency,</div><div class="line">								net.bitrate || &apos;?&apos;</div><div class="line">						);</div><div class="line"></div><div class="line">						if (is_assoc)</div><div class="line">						&#123;</div><div class="line">							s += String.format(</div><div class="line">								&apos;&lt;strong&gt;BSSID:&lt;/strong&gt; %s&lt;br /&gt;&apos; +</div><div class="line">								&apos;&lt;strong&gt;加密:&lt;/strong&gt; %s&apos;,</div><div class="line">									net.bssid,</div><div class="line">									net.encryption</div><div class="line">							);</div><div class="line">						&#125;</div><div class="line">						else</div><div class="line">						&#123;</div><div class="line">							s += &apos;&lt;em&gt;未开启或未关联无线&lt;/em&gt;&apos;;</div><div class="line">						&#125;</div><div class="line"></div><div class="line">						s += &apos;&lt;/small&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&apos;;</div><div class="line"></div><div class="line">						for (var bssid in net.assoclist)</div><div class="line">						&#123;</div><div class="line">							assoclist.push(&#123;</div><div class="line">								bssid:    bssid,</div><div class="line">								signal:   net.assoclist[bssid].signal,</div><div class="line">								noise:    net.assoclist[bssid].noise,</div><div class="line">								rx_rate:  net.assoclist[bssid].rx_rate,</div><div class="line">								rx_mcs:   net.assoclist[bssid].rx_mcs,</div><div class="line">								rx_40mhz: net.assoclist[bssid].rx_40mhz,</div><div class="line">								tx_rate:  net.assoclist[bssid].tx_rate,</div><div class="line">								tx_mcs:   net.assoclist[bssid].tx_mcs,</div><div class="line">								tx_40mhz: net.assoclist[bssid].tx_40mhz,</div><div class="line">								link:     net.link,</div><div class="line">								name:     net.name</div><div class="line">							&#125;);</div><div class="line">						&#125;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">					if (!s)</div><div class="line">						s = &apos;&lt;em&gt;无可用信息&lt;/em&gt;&apos;;</div><div class="line"></div><div class="line">					td.innerHTML = s;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			var ac = document.getElementById(&apos;wifi_assoc_table&apos;);</div><div class="line">			if (ac)</div><div class="line">			&#123;</div><div class="line">				/* clear all rows */</div><div class="line">				while( ac.rows.length &gt; 1 )</div><div class="line">					ac.rows[0].parentNode.deleteRow(1);</div><div class="line"></div><div class="line">				assoclist.sort(function(a, b) &#123;</div><div class="line">					return (a.name == b.name)</div><div class="line">						? (a.bssid &lt; b.bssid)</div><div class="line">						: (a.name  &gt; b.name )</div><div class="line">					;</div><div class="line">				&#125;);</div><div class="line"></div><div class="line">				for( var i = 0; i &lt; assoclist.length; i++ )</div><div class="line">				&#123;</div><div class="line">					var tr = ac.rows[0].parentNode.insertRow(-1);</div><div class="line">						tr.className = &apos;cbi-section-table-row cbi-rowstyle-&apos; + (1 + (i % 2));</div><div class="line"></div><div class="line">					var icon;</div><div class="line">					var q = (-1 * (assoclist[i].noise - assoclist[i].signal)) / 5;</div><div class="line">					if (q &lt; 1)</div><div class="line">						icon = &quot;/luci-static/resources/icons/signal-0.png&quot;;</div><div class="line">					else if (q &lt; 2)</div><div class="line">						icon = &quot;/luci-static/resources/icons/signal-0-25.png&quot;;</div><div class="line">					else if (q &lt; 3)</div><div class="line">						icon = &quot;/luci-static/resources/icons/signal-25-50.png&quot;;</div><div class="line">					else if (q &lt; 4)</div><div class="line">						icon = &quot;/luci-static/resources/icons/signal-50-75.png&quot;;</div><div class="line">					else</div><div class="line">						icon = &quot;/luci-static/resources/icons/signal-75-100.png&quot;;</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = String.format(</div><div class="line">						&apos;&lt;img src=&quot;%s&quot; title=&quot;信号: %d dBm / 噪声: %d dBm&quot; /&gt;&apos;,</div><div class="line">						icon, assoclist[i].signal, assoclist[i].noise</div><div class="line">					);</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = assoclist[i].bssid;</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = String.format(</div><div class="line">						&apos;&lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt;&apos;,</div><div class="line">							assoclist[i].link,</div><div class="line">							&apos;%h&apos;.format(assoclist[i].name).nobr()</div><div class="line">					);</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = String.format(&apos;%d dBm&apos;, assoclist[i].signal).nobr();</div><div class="line">					tr.insertCell(-1).innerHTML = String.format(&apos;%d dBm&apos;, assoclist[i].noise).nobr();</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = (assoclist[i].rx_mcs &gt; -1)</div><div class="line">						? String.format(&apos;%.1f Mbit/s, MCS %d, %dMHz&apos;, assoclist[i].rx_rate / 1000, assoclist[i].rx_mcs, assoclist[i].rx_40mhz ? 40 : 20).nobr()</div><div class="line">						: String.format(&apos;%.1f Mbit/s&apos;, assoclist[i].rx_rate / 1000).nobr()</div><div class="line">					;</div><div class="line"></div><div class="line">					tr.insertCell(-1).innerHTML = (assoclist[i].tx_mcs &gt; -1)</div><div class="line">						? String.format(&apos;%.1f Mbit/s, MCS %d, %dMHz&apos;, assoclist[i].tx_rate / 1000, assoclist[i].tx_mcs, assoclist[i].tx_40mhz ? 40 : 20).nobr()</div><div class="line">						: String.format(&apos;%.1f Mbit/s&apos;, assoclist[i].tx_rate / 1000).nobr()</div><div class="line">					;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">				if (ac.rows.length == 1)</div><div class="line">				&#123;</div><div class="line">					var tr = ac.rows[0].parentNode.insertRow(-1);</div><div class="line">						tr.className = &apos;cbi-section-table-row&apos;;</div><div class="line"></div><div class="line">					var td = tr.insertCell(-1);</div><div class="line">						td.colSpan = 7;</div><div class="line">						td.innerHTML = &apos;&lt;br /&gt;&lt;em&gt;无可用信息&lt;/em&gt;&apos;;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line"></div><div class="line">			var e;</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;localtime&apos;))</div><div class="line">				e.innerHTML = info.localtime;</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;uptime&apos;))</div><div class="line">				e.innerHTML = String.format(&apos;%t&apos;, info.uptime);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;loadavg&apos;))</div><div class="line">				e.innerHTML = String.format(</div><div class="line">					&apos;%.02f, %.02f, %.02f&apos;,</div><div class="line">					info.loadavg[0] / 65535.0,</div><div class="line">					info.loadavg[1] / 65535.0,</div><div class="line">					info.loadavg[2] / 65535.0</div><div class="line">				);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;memtotal&apos;))</div><div class="line">				e.innerHTML = progressbar(</div><div class="line">					((info.memory.free + info.memory.buffered) / 1024) + &quot; kB&quot;,</div><div class="line">					(info.memory.total / 1024) + &quot; kB&quot;</div><div class="line">				);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;memfree&apos;))</div><div class="line">				e.innerHTML = progressbar(</div><div class="line">					(info.memory.free / 1024) + &quot; kB&quot;,</div><div class="line">					(info.memory.total / 1024) + &quot; kB&quot;</div><div class="line">				);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;membuff&apos;))</div><div class="line">				e.innerHTML = progressbar(</div><div class="line">					(info.memory.buffered / 1024) + &quot; kB&quot;,</div><div class="line">					(info.memory.total / 1024) + &quot; kB&quot;</div><div class="line">				);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;swaptotal&apos;))</div><div class="line">				e.innerHTML = progressbar(</div><div class="line">					(info.swap.free / 1024) + &quot; kB&quot;,</div><div class="line">					(info.swap.total / 1024) + &quot; kB&quot;</div><div class="line">				);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;swapfree&apos;))</div><div class="line">				e.innerHTML = progressbar(</div><div class="line">					(info.swap.free / 1024) + &quot; kB&quot;,</div><div class="line">					(info.swap.total / 1024) + &quot; kB&quot;</div><div class="line">				);</div><div class="line"></div><div class="line">			if (e = document.getElementById(&apos;conns&apos;))</div><div class="line">				e.innerHTML = progressbar(info.conncount, info.connmax);</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	);</div><div class="line">//]]&gt;&lt;/script&gt;</div><div class="line"></div><div class="line">&lt;h2&gt;&lt;a id=&quot;content&quot; name=&quot;content&quot;&gt;状态&lt;/a&gt;&lt;/h2&gt;</div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">	&lt;legend&gt;系统&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table width=&quot;100%&quot; cellspacing=&quot;10&quot;&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;主机名&lt;/td&gt;&lt;td&gt;NHRT&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;主机型号&lt;/td&gt;&lt;td&gt;NHPT CR5400&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;固件版本&lt;/td&gt;&lt;td&gt;</div><div class="line">			 Cobra  P015C005B025</div><div class="line">		&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;内核版本&lt;/td&gt;&lt;td&gt;3.18.29&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;本地时间&lt;/td&gt;&lt;td id=&quot;localtime&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;运行时间&lt;/td&gt;&lt;td id=&quot;uptime&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;平均负载&lt;/td&gt;&lt;td id=&quot;loadavg&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">	&lt;legend&gt;内存&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table width=&quot;100%&quot; cellspacing=&quot;10&quot;&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;可用数&lt;/td&gt;&lt;td id=&quot;memtotal&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;空闲数&lt;/td&gt;&lt;td id=&quot;memfree&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;已缓冲&lt;/td&gt;&lt;td id=&quot;membuff&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">        &lt;legend&gt;4G网络&lt;/legend&gt;</div><div class="line"></div><div class="line">        &lt;table width=&quot;100%&quot; cellspacing=&quot;10&quot;&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;固件版本&lt;/td&gt;&lt;td&gt;10.21.3.14.xw_trk_hk_00.05</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;运营商&lt;/td&gt;&lt;td&gt;46000</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;注册状态&lt;/td&gt;&lt;td&gt;2,1,11b2,0003,7</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;小区信息&lt;/td&gt;&lt;td&gt;PLMN ID:46000,cell ID:418,mode:17,band:38,channel:37900,bandwidth:6,TDD UL/DL configuration:2,RSSI:50,RSRP:34 OK</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;RSSI&lt;/td&gt;&lt;td&gt;-104 dBm&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;IMSI&lt;/td&gt;&lt;td&gt;460025111043733</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;IP&lt;/td&gt;&lt;td&gt;10.60.114.171</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;专有承载数&lt;/td&gt;&lt;td&gt;0</div><div class="line">&lt;/td&gt;&lt;/tr&gt;</div><div class="line">        &lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">	&lt;legend&gt;网络&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table width=&quot;100%&quot; cellspacing=&quot;10&quot;&gt;</div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot; style=&quot;vertical-align:top&quot;&gt;IPv4 WAN状态&lt;/td&gt;&lt;td&gt;</div><div class="line">			&lt;table&gt;&lt;tr&gt;</div><div class="line">				&lt;td id=&quot;wan4_i&quot; style=&quot;width:16px; text-align:center; padding:3px&quot;&gt;&lt;img src=&quot;/luci-static/resources/icons/ethernet_disabled.png&quot; /&gt;&lt;br /&gt;&lt;small&gt;?&lt;/small&gt;&lt;/td&gt;</div><div class="line">				&lt;td id=&quot;wan4_s&quot; style=&quot;vertical-align:middle; padding: 3px&quot;&gt;&lt;em&gt;收集数据：&lt;/em&gt;&lt;/td&gt;</div><div class="line">			&lt;/tr&gt;&lt;/table&gt;</div><div class="line">		&lt;/td&gt;&lt;/tr&gt;</div><div class="line"></div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot; style=&quot;vertical-align:top&quot;&gt;IPv6 WAN状态&lt;/td&gt;&lt;td&gt;</div><div class="line">			&lt;table&gt;&lt;tr&gt;</div><div class="line">				&lt;td id=&quot;wan6_i&quot; style=&quot;width:16px; text-align:center; padding:3px&quot;&gt;&lt;img src=&quot;/luci-static/resources/icons/ethernet_disabled.png&quot; /&gt;&lt;br /&gt;&lt;small&gt;?&lt;/small&gt;&lt;/td&gt;</div><div class="line">				&lt;td id=&quot;wan6_s&quot; style=&quot;vertical-align:middle; padding: 3px&quot;&gt;&lt;em&gt;收集数据：&lt;/em&gt;&lt;/td&gt;</div><div class="line">			&lt;/tr&gt;&lt;/table&gt;</div><div class="line">		&lt;/td&gt;&lt;/tr&gt;</div><div class="line"></div><div class="line">		&lt;tr&gt;&lt;td width=&quot;33%&quot;&gt;活动连接&lt;/td&gt;&lt;td id=&quot;conns&quot;&gt;-&lt;/td&gt;&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">	&lt;legend&gt;DHCP分配&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table class=&quot;cbi-section-table&quot; id=&quot;lease_status_table&quot;&gt;</div><div class="line">		&lt;tr class=&quot;cbi-section-table-titles&quot;&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;主机名&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;IPv4-地址&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;MAC-地址&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;剩余租期&lt;/th&gt;</div><div class="line">		&lt;/tr&gt;</div><div class="line">		&lt;tr class=&quot;cbi-section-table-row&quot;&gt;</div><div class="line">			&lt;td colspan=&quot;4&quot;&gt;&lt;em&gt;&lt;br /&gt;收集数据：&lt;/em&gt;&lt;/td&gt;</div><div class="line">		&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot; style=&quot;display:none&quot;&gt;</div><div class="line">	&lt;legend&gt;DHCPv6分配&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table class=&quot;cbi-section-table&quot; id=&quot;lease6_status_table&quot;&gt;</div><div class="line">		&lt;tr class=&quot;cbi-section-table-titles&quot;&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;主机名&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;IPv6-地址&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;DUID（DHCP唯一标识符）&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;剩余租期&lt;/th&gt;</div><div class="line">		&lt;/tr&gt;</div><div class="line">		&lt;tr class=&quot;cbi-section-table-row&quot;&gt;</div><div class="line">			&lt;td colspan=&quot;4&quot;&gt;&lt;em&gt;&lt;br /&gt;收集数据：&lt;/em&gt;&lt;/td&gt;</div><div class="line">		&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">	&lt;legend&gt;无线&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table id=&quot;wifi_status_table&quot; width=&quot;100%&quot; cellspacing=&quot;10&quot;&gt;</div><div class="line">		&lt;tr&gt;&lt;td&gt;&lt;em&gt;收集数据：&lt;/em&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line"></div><div class="line">&lt;fieldset class=&quot;cbi-section&quot;&gt;</div><div class="line">	&lt;legend&gt;已连接站点&lt;/legend&gt;</div><div class="line"></div><div class="line">	&lt;table class=&quot;cbi-section-table&quot; id=&quot;wifi_assoc_table&quot;&gt;</div><div class="line">		&lt;tr class=&quot;cbi-section-table-titles&quot;&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&amp;#160;&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;MAC-地址&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;网络&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;信号&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;噪声&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;接收速率&lt;/th&gt;</div><div class="line">			&lt;th class=&quot;cbi-section-table-cell&quot;&gt;发送速率&lt;/th&gt;</div><div class="line">		&lt;/tr&gt;</div><div class="line">		&lt;tr class=&quot;cbi-section-table-row&quot;&gt;</div><div class="line">			&lt;td colspan=&quot;7&quot;&gt;&lt;em&gt;&lt;br /&gt;收集数据：&lt;/em&gt;&lt;/td&gt;</div><div class="line">		&lt;/tr&gt;</div><div class="line">	&lt;/table&gt;</div><div class="line">&lt;/fieldset&gt;</div><div class="line">&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;p class=&quot;luci&quot;&gt;</div><div class="line">	&gt;&gt;&gt;&gt;&gt; Cobra  P015C005B025 &gt;&gt;&gt;&gt;&gt;</div><div class="line">&lt;/p&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/06/19/iOS面试题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/19/iOS面试题/" itemprop="url">iOS面试题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-19T11:53:56+08:00">
                2017-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>为提高自己的基础知识水平，最近看了一些笔试相关题目，感觉很多说不清楚和明白，我会在这篇文中中去分享一些面试题和答案，供大家参考，如有错误的地方请大家指正。谢谢！</p>
</blockquote>
<h6 id="什么情况使用-weak-关键字，相比-assign-有什么不同？"><a href="#什么情况使用-weak-关键字，相比-assign-有什么不同？" class="headerlink" title="什么情况使用 weak 关键字，相比 assign 有什么不同？"></a>什么情况使用 weak 关键字，相比 assign 有什么不同？</h6><p>什么情况使用 weak 关键字？<br>在 ARC 中,在有可能出现循环引用的时候,往往要通过让其中一端使用 weak 来解决,比如: delegate 代理属性<br>自身已经对它进行一次强引用,没有必要再强引用一次,此时也会使用 weak,自定义 IBOutlet 控件属性一般也使用 weak；当然，也可以使用strong。<br>不同点：<br>weak 此特质表明该属性定义了一种“非拥有关系” (nonowning relationship)。为这种属性设置新值时，设置方法既不保留新值，也不释放旧值。此特质同assign类似， 然而在属性所指的对象遭到摧毁时，属性值也会清空(nil out)。 而 assign 的“设置方法”只会执行针对“纯量类型” (scalar type，例如 CGFloat 或 NSlnteger 等)的简单赋值操作。<br>assign 可以用非 OC 对象,而 weak 必须用于 OC 对象</p>
<hr>
<h6 id="copy关键字"><a href="#copy关键字" class="headerlink" title="copy关键字"></a>copy关键字</h6><p>1、可变类型使用copy：NSString、NSArray、NSDictionary 等等经常使用copy关键字，是因为他们有对应的可变类型：NSMutableString、NSMutableArray、NSMutableDictionary；</p>
<blockquote>
<p>用 @property 声明 NSString、NSArray、NSDictionary 经常使用 copy 关键字，是因为他们有对应的可变类型：NSMutableString、NSMutableArray、NSMutableDictionary，他们之间可能进行赋值操作，为确保对象中的字符串值不会无意间变动，应该在设置新属性值时拷贝一份。</p>
</blockquote>
<p>2、block使用copy：在 MRC 中,方法内部的 block 是在栈区的,使用 copy 可以把它放到堆区.在 ARC 中写不写都行：对于 block 使用 copy 还是 strong 效果是一样的，编译器自动对 block 进行了 copy 操作。</p>
<hr>
<h6 id="property-copy-NSMutableArray-array有什么问题"><a href="#property-copy-NSMutableArray-array有什么问题" class="headerlink" title="@property (copy) NSMutableArray *array有什么问题"></a><code>@property (copy) NSMutableArray *array</code>有什么问题</h6><p>1、对数组内元素进行修改、删除时，会因为找不到对应的方法而crash。因为 copy 就是复制一个不可变 NSArray 的对象；</p>
<p>2、使用了 atomic(同步锁) 属性会严重影响性能；</p>
<blockquote>
<p>该属性使用了同步锁，会在创建时生成一些额外的代码用于帮助编写多线程程序，这会带来性能问题，通过声明 nonatomic 能够节省这些虽然很小但是不必要额外开销。</p>
</blockquote>
<hr>
<h6 id="如何让自己的类使用copy修饰符，如何重写带copy关键字的属性。"><a href="#如何让自己的类使用copy修饰符，如何重写带copy关键字的属性。" class="headerlink" title="如何让自己的类使用copy修饰符，如何重写带copy关键字的属性。"></a>如何让自己的类使用copy修饰符，如何重写带copy关键字的属性。</h6><p>1、实现使用copy修饰符</p>
<blockquote>
<p>若想令自己所写的对象具有copy功能，则要实现 NSCopying 协议。如果自定义的对象分为可变版本与不可变版本，那么就要同时实现 NSCopying 与 NSMutableCopying 协议</p>
</blockquote>
<p>(1)遵守NSCopying或NSMutableCopying协议<br>(2)实现<code>- (id)copyWithZone:(NSZone *)zone;</code>方法<br>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//initWithName方法为类自定义初始化方法</div><div class="line">- (id)copyWithZone:(NSZone *)zone &#123;</div><div class="line">   CYLUser *copy = [[[self class] allocWithZone:zone]</div><div class="line">                    initWithName:_name</div><div class="line">                    age:_age</div><div class="line">                    sex:_sex];</div><div class="line">   copy-&gt;_friends = [_friends mutableCopy];</div><div class="line">   return copy;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//在例子中，存放朋友对象的 set 是用 “copyWithZone:” 方法来拷贝的，这种浅拷贝方式不会逐个复制 set 中的元素。若需要深拷贝的话，则可像下面这样，编写一个专供深拷贝所用的方法:</div><div class="line">- (id)deepCopy &#123;</div><div class="line">   CYLUser *copy = [[[self class] alloc]</div><div class="line">                    initWithName:_name</div><div class="line">                    age:_age</div><div class="line">                    sex:_sex];</div><div class="line">   copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends</div><div class="line">                                            copyItems:YES];</div><div class="line">   return copy;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2、重写带copy关键字的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (void)setName:(NSString *)name &#123;</div><div class="line">   if (_name != name) &#123;</div><div class="line">       //[_name release];//MRC</div><div class="line">       _name = [name copy];</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h6 id="协议-protocol-和类别-categories-中如何使用-property"><a href="#协议-protocol-和类别-categories-中如何使用-property" class="headerlink" title="协议(@protocol)和类别(categories)中如何使用@property"></a>协议(@protocol)和类别(categories)中如何使用@property</h6><p>1、在 protocol 中使用 property 只会生成 setter 和 getter 方法声明,我们使用属性的目的,是希望遵守我协议的对象能实现该属性。<br>2、category 使用 @property 也是只会生成 setter 和 getter 方法的声明,如果我们真的需要给 category 增加属性的实现,需要借助于runtime的两个函数<code>objc_setAssociatedObject/objc_getAssociatedObject</code>。</p>
<hr>
<h6 id="runtim是如何实现weak属性"><a href="#runtim是如何实现weak属性" class="headerlink" title="runtim是如何实现weak属性"></a>runtim是如何实现weak属性</h6><p>weak属性特点：</p>
<blockquote>
<p>weak 此特质表明该属性定义了一种“非拥有关系” (nonowning relationship)。为这种属性设置新值时，设置方法既不保留新值，也不释放旧值。此特质同 assign 类似， 然而在属性所指的对象遭到摧毁时，属性值也会清空(nil out)。</p>
</blockquote>
<p>如何实现：</p>
<blockquote>
<p>runtime 对注册的类， 会进行布局，对于 weak 对象会放入一个 hash 表中。 用 weak 指向的对象内存地址作为 key，当此对象的引用计数为0的时候会 dealloc，假如 weak 指向的对象内存地址是a，那么就会以a为键， 在这个 weak 表中搜索，找到所有以a为键的 weak 对象，从而设置为 nil。</p>
</blockquote>
<hr>
<h6 id="property中有哪些属性关键字，和其意义。"><a href="#property中有哪些属性关键字，和其意义。" class="headerlink" title="@property中有哪些属性关键字，和其意义。"></a>@property中有哪些属性关键字，和其意义。<br></h6><p>1、原子性— nonatomic 特质</p>
<blockquote>
<p>在默认情况下，由编译器合成的方法会通过锁定机制确保其原子性(atomicity)。如果属性具备 nonatomic 特质，则不使用自旋锁。请注意，尽管没有名为“atomic”的特质(如果某属性不具备 nonatomic 特质，那它就是“原子的” ( atomic) )，但是仍然可以在属性特质中写明这一点，编译器不会报错。若是自己定义存取方法，那么就应该遵从与属性特质相符的原子性。</p>
</blockquote>
<p>2、读/写权限—readwrite(读写)、readonly (只读)  <br><br>3、内存管理语义—assign、strong、 weak、unsafe_unretained、copy  <br><br>4、方法名—<code>getter=&lt;name&gt;  setter=&lt;name&gt;
@property样式：@property (nonatomic, getter=isOn) BOOL on;</code></p>
<hr>
<h6 id="weak属性需要在dealloc中置nil么？"><a href="#weak属性需要在dealloc中置nil么？" class="headerlink" title="weak属性需要在dealloc中置nil么？"></a>weak属性需要在dealloc中置nil么？</h6><p>不需要。</p>
<blockquote>
<p>在ARC环境无论是强指针还是弱指针都无需在 dealloc 设置为 nil ， ARC 会自动帮我们处理<br>即便是编译器不帮我们做这些，weak也不需要在 dealloc 中置nil</p>
</blockquote>
<hr>
<h6 id="synthesize和-dynamic分别有什么作用？"><a href="#synthesize和-dynamic分别有什么作用？" class="headerlink" title="@synthesize和@dynamic分别有什么作用？"></a>@synthesize和@dynamic分别有什么作用？</h6><p>1、@property有两个对应的词，一个是 @synthesize，一个是 @dynamic。如果 @synthesize和 @dynamic都没写，那么默认的就是<code>@syntheszie var = _var;</code>。<br><br>2、@synthesize 的语义是如果你没有手动实现 setter 方法和 getter 方法，那么编译器会自动为你加上这两个方法。<br><br>3、@dynamic 告诉编译器：属性的 setter 与 getter 方法由用户自己实现，不自动生成。（当然对于 readonly 的属性只需提供 getter 即可）。假如一个属性被声明为 @dynamic var，然后你没有提供 @setter方法和 @getter 方法，编译的时候没问题，但是当程序运行到 <code>instance.var = someVar</code>,由于缺 setter 方法会导致程序崩溃；或者当运行到 <code>someVar = var</code> 时，由于缺 getter 方法同样会导致崩溃。编译时没问题，运行时才执行相应的方法，这就是所谓的动态绑定。</p>
<hr>
<h6 id="ARC下，不显式指定任何属性关键字时，默认的关键字都有哪些？"><a href="#ARC下，不显式指定任何属性关键字时，默认的关键字都有哪些？" class="headerlink" title="ARC下，不显式指定任何属性关键字时，默认的关键字都有哪些？"></a>ARC下，不显式指定任何属性关键字时，默认的关键字都有哪些？</h6><p>1、对应基本数据类型默认关键字是atomic,readwrite,assign  <br><br>2、对于普通的 Objective-C 对象atomic,readwrite,strong</p>
<hr>
<h6 id="用-property声明的NSString（或NSArray，NSDictionary）经常使用copy关键字，为什么？如果改用strong关键字，可能造成什么问题？"><a href="#用-property声明的NSString（或NSArray，NSDictionary）经常使用copy关键字，为什么？如果改用strong关键字，可能造成什么问题？" class="headerlink" title="用@property声明的NSString（或NSArray，NSDictionary）经常使用copy关键字，为什么？如果改用strong关键字，可能造成什么问题？"></a>用@property声明的NSString（或NSArray，NSDictionary）经常使用copy关键字，为什么？如果改用strong关键字，可能造成什么问题？</h6><p>1、因为父类指针可以指向子类对象,使用 copy 的目的是为了让本对象的属性不受外界影响,使用 copy 无论给我传入是一个可变对象还是不可对象,我本身持有的就是一个不可变的副本. <br><br>2、如果我们使用是 strong ,那么这个属性就有可能指向一个可变对象,如果这个可变对象在外部被修改了,那么会影响该属性.</p>
<blockquote>
<p>copy 此特质所表达的所属关系与 strong 类似。然而设置方法并不保留新值，而是将其“拷贝” (copy)。 当属性类型为 NSString 时，经常用此特质来保护其封装性，因为传递给设置方法的新值有可能指向一个 NSMutableString 类的实例。这个类是 NSString 的子类，表示一种可修改其值的字符串，此时若是不拷贝字符串，那么设置完属性之后，字符串的值就可能会在对象不知情的情况下遭人更改。所以，这时就要拷贝一份“不可变” (immutable)的字符串，确保对象中的字符串值不会无意间变动。只要实现属性所用的对象是“可变的” (mutable)，就应该在设置新属性值时拷贝一份。</p>
</blockquote>
<p>为了理解这种做法，首先要知道，两种情况：</p>
<blockquote>
<p>在非集合类对象中：对 immutable 对象进行 copy 操作，是指针复制，mutableCopy 操作时内容复制；对 mutable 对象进行 copy 和 mutableCopy 都是内容复制。用代码简单表示如下：<br>[immutableObject copy] // 浅复制<br>[immutableObject mutableCopy] //深复制<br>[mutableObject copy] //深复制<br>[mutableObject mutableCopy] //深复制</p>
<p>集合类对象的copy和mutableCopy<br>[immutableObject copy] // 浅复制<br>[immutableObject mutableCopy] //单层深复制<br>[mutableObject copy] //单层深复制<br>[mutableObject mutableCopy] //单层深复制</p>
<hr>
</blockquote>
<h6 id="synthesize合成实例变量的规则是什么？假如property名为foo，存在一个名为-foo的实例变量，那么还会自动合成新变量么？"><a href="#synthesize合成实例变量的规则是什么？假如property名为foo，存在一个名为-foo的实例变量，那么还会自动合成新变量么？" class="headerlink" title="@synthesize合成实例变量的规则是什么？假如property名为foo，存在一个名为_foo的实例变量，那么还会自动合成新变量么？"></a>@synthesize合成实例变量的规则是什么？假如property名为foo，存在一个名为_foo的实例变量，那么还会自动合成新变量么？</h6><p>不会，存在_foo了就不会自动创建变量了。</p>
<hr>
<h6 id="objc中向一个nil对象发送消息将会发生什么？"><a href="#objc中向一个nil对象发送消息将会发生什么？" class="headerlink" title="objc中向一个nil对象发送消息将会发生什么？"></a>objc中向一个nil对象发送消息将会发生什么？</h6><p>在 Objective-C 中向 nil 发送消息是完全有效的——只是在运行时不会有任何作用。 <br></p>
<blockquote>
<p>objc是动态语言，每个方法在运行时会被动态转为消息发送，即：objc_msgSend(receiver, selector)。</p>
</blockquote>
<p>objc在向一个对象发送消息时，runtime库会根据对象的isa指针找到该对象实际所属的类，然后在该类中的方法列表以及其父类方法列表中寻找方法运行，然后在发送消息的时候，objc_msgSend方法不会返回值，所谓的返回内容都是具体调用时执行的。 那么，回到本题，如果向一个nil对象发送消息，首先在寻找对象的isa指针时就是0地址返回了，所以不会出现任何错误。</p>
<hr>
<h6 id="对象的内存销毁时间表"><a href="#对象的内存销毁时间表" class="headerlink" title="对象的内存销毁时间表"></a>对象的内存销毁时间表</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// 对象的内存销毁时间表 wwdc 2011</div><div class="line"> 1. 调用 -release ：引用计数变为零</div><div class="line">     * 对象正在被销毁，生命周期即将结束.</div><div class="line">     * 不能再有新的 __weak 弱引用， 否则将指向 nil.</div><div class="line">     * 调用 [self dealloc]</div><div class="line"> 2. 子类 调用 -dealloc</div><div class="line">     * 继承关系中最底层的子类 在调用 -dealloc</div><div class="line">     * 如果是 MRC 代码 则会手动释放实例变量们（iVars）</div><div class="line">     * 继承关系中每一层的父类 都在调用 -dealloc</div><div class="line"> 3. NSObject 调 -dealloc</div><div class="line">     * 只做一件事：调用 Objective-C runtime 中的 object_dispose() 方法</div><div class="line"> 4. 调用 object_dispose()</div><div class="line">     * 为 C++ 的实例变量们（iVars）调用 destructors</div><div class="line">     * 为 ARC 状态下的 实例变量们（iVars） 调用 -release</div><div class="line">     * 解除所有使用 runtime Associate方法关联的对象</div><div class="line">     * 解除所有 __weak 引用</div><div class="line">     * 调用 free()</div></pre></td></tr></table></figure>
<hr>
<h6 id="objc中的类方法和实例方法有什么本质区别和联系？"><a href="#objc中的类方法和实例方法有什么本质区别和联系？" class="headerlink" title="objc中的类方法和实例方法有什么本质区别和联系？"></a>objc中的类方法和实例方法有什么本质区别和联系？</h6><ul>
<li>类方法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">类方法是属于类对象的</div><div class="line">类方法只能通过类对象调用</div><div class="line">类方法中的self是类对象</div><div class="line">类方法可以调用其他的类方法</div><div class="line">类方法中不能访问成员变量</div><div class="line">类方法中不能直接调用对象方法</div></pre></td></tr></table></figure>
<ul>
<li>实例方法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">实例方法是属于实例对象的</div><div class="line">实例方法只能通过实例对象调用</div><div class="line">实例方法中的self是实例对象</div><div class="line">实例方法中可以访问成员变量</div><div class="line">实例方法中直接调用实例方法</div><div class="line">实例方法中也可以调用类方法(通过类名)</div></pre></td></tr></table></figure>
<hr>
<p>今天先到这吧，项目工作还是比较繁忙的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/06/13/python网络爬虫/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/13/python网络爬虫/" itemprop="url">python网络爬虫</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-13T14:28:07+08:00">
                2017-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最近在简书上浏览博客时发现有人用爬虫历时30个小时拿到简书大约30万用户的活跃情况，我大为吃惊呀。先前也了解了一下关于爬虫方面的东西，但过于零碎没有形成系统体系。今日我新增这篇博客来记录我学习爬虫已经应用Python编写简单爬虫的过程和个人的一些总结，仅供大家参考，同时发布在简书平台上。我的用户名叫“靠北”，如想共同进步，请联系我。</p>
<p>附：学习视频地址：<a href="http://www.imooc.com/learn/563" target="_blank" rel="external">http://www.imooc.com/learn/563</a>   课程可能稍有难度，建议先学习基本的Python语法、函数及正则表达式等。</p>
</blockquote>
<ul>
<li>爬虫的简介<blockquote>
<p>爬虫技术用来从互联网上自动获取需要的数据。</p>
</blockquote>
</li>
</ul>
<p>我的理解是：爬虫是根据编写好的代码自动去执行人类工作，爬虫可以几乎能爬到人类能打开的所有网页，并根据预先设置的存储路径将需要的数据进行本地化存储，供后续使用和研究。网络搜索引擎就是一个巨大的爬虫系统。</p>
<p>。。。。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/06/06/iOS开发中工具类（方法）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/06/iOS开发中工具类（方法）/" itemprop="url">iOS开发中工具类（方法）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-06T16:04:47+08:00">
                2017-06-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本文章主要我在实际开发过程中常用到的一些方法或函数，未来类似功能可以直接调用或者修改即可使用。本篇将长期更新。<br></p>
<p>目录</p>
</blockquote>
<ul>
<li>判断字符串是否为IP地址</li>
<li>获取设备在局域网中的IP地址</li>
<li>使用Reachability监测网络环境</li>
<li>UIGraphicsBeginImageContext消除锯齿</li>
<li>iOS线程</li>
<li>UIbutton图片和文字默认偏移（上下）</li>
<li>判断设置是否越狱</li>
<li>判断是否是数字</li>
<li>判断是否是字符（a-z）</li>
<li>获取当前任务占用的内存</li>
<li>获取中英文混合字符串的长度</li>
<li>获取字节长度</li>
<li>获取app的沙盒路径</li>
<li>为Button绘制背景图片</li>
<li>判断空字符串</li>
<li>判断单个文件大小</li>
<li>获取视频第一帧</li>
<li>获取系统字体</li>
<li>比对与当前时间的天数差</li>
<li>色值转换（#2324512z转UIColor）</li>
<li>通过颜色设置图片</li>
<li>通过颜色设置图片（有高度）</li>
<li>将图片转换为黑白</li>
<li>缓存图片到本地  (注意：需要指定缓存路径，获取到本地沙盒路径等)。</li>
<li>图片裁剪（传入Rect）</li>
<li>按尺寸压缩图片</li>
<li>UIImage两种加载方式比较</li>
</ul>
<hr>
<ul>
<li>判断字符串是否是IP地址</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//判断是否是IP地址</div><div class="line">- (BOOL)isValidatIP:(NSString *)ipAddress&#123;</div><div class="line"></div><div class="line">    NSString  *urlRegEx =@&quot;^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.&quot;</div><div class="line">    &quot;([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.&quot;</div><div class="line">    &quot;([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.&quot;</div><div class="line">    &quot;([01]?\\d\\d?|2[0-4]\\d|25[0-5])$&quot;;</div><div class="line"></div><div class="line">    NSPredicate *urlTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, urlRegEx];</div><div class="line">    return [urlTest evaluateWithObject:ipAddress];</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<ul>
<li>获取设备在局域网中的IP地址</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//获取局域网IP</div><div class="line">- (NSString *)deviceIPAdress &#123;</div><div class="line">    NSString *address = @&quot;手机移动网络&quot;;</div><div class="line">    struct ifaddrs *interfaces = NULL;</div><div class="line">    struct ifaddrs *temp_addr = NULL;</div><div class="line">    int success = 0;</div><div class="line"></div><div class="line">    success = getifaddrs(&amp;interfaces);</div><div class="line">    if (success == 0) &#123;</div><div class="line">        temp_addr = interfaces;</div><div class="line">        while (temp_addr != NULL) &#123;</div><div class="line">            if( (*temp_addr).ifa_addr-&gt;sa_family == AF_INET) &#123;</div><div class="line">                if ([[NSString stringWithUTF8String:temp_addr-&gt;ifa_name] isEqualToString:@&quot;en0&quot;]) &#123;</div><div class="line">                    address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr-&gt;ifa_addr)-&gt;sin_addr)];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            temp_addr = temp_addr-&gt;ifa_next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    freeifaddrs(interfaces);</div><div class="line">    return address;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>ARC &amp;&amp; MRC 使用</p>
</blockquote>
<ul>
<li>ARC环境中引入MRC文件  加入<code>-fno-objc-arc</code><br></li>
<li>MRC环境引入ARC文件，加入：<code>-fobjc-arc</code></li>
</ul>
<hr>
<ul>
<li>使用Reachability监测网络环境</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//注册通知、开启网络状况的监听</div><div class="line">    [[NSNotificationCenter defaultCenter] addObserver:self</div><div class="line">                                             selector:@selector(reachabilityChanged:)</div><div class="line">                                                 name:kReachabilityChangedNotification</div><div class="line">                                               object:nil];</div><div class="line"></div><div class="line">//通知接收方法</div><div class="line">-(void)reachabilityChanged:(NSNotification*)note</div><div class="line">&#123;</div><div class="line">    Reachability * reach = [note object];</div><div class="line">    NSParameterAssert([reach isKindOfClass: [Reachability class]]);</div><div class="line">    NetworkStatus status = [reach currentReachabilityStatus];</div><div class="line"></div><div class="line">    if (status == NotReachable) &#123;</div><div class="line">        NSLog(@&quot;Notification Says Unreachable&quot;);</div><div class="line">    &#125;else if(status == ReachableViaWWAN)&#123;</div><div class="line">        NSLog(@&quot;Notification Says mobilenet&quot;);</div><div class="line">    &#125;else if(status == ReachableViaWiFi)&#123;</div><div class="line">        NSLog(@&quot;Notification Says wifinet&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>需要导入 Reachability.h 和Reachability.m文件。下载地址：<a href="https://developer.apple.com/library/ios/samplecode/Reachability/Reachability.zip" target="_blank" rel="external">https://developer.apple.com/library/ios/samplecode/Reachability/Reachability.zip</a></p>
</blockquote>
<hr>
<ul>
<li>UIGraphicsBeginImageContext消除锯齿<br>最近在做连线的时候发现，斜线会有锯齿存在。查阅资料发现是像素点原因引起，以下只是简单解决的一种方式，有一定效果但不全面。仅做记录。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//方法1</div><div class="line">view.layer.contentsScale = [[UIScreen mainScreen] scale];</div><div class="line"></div><div class="line">//方法2</div><div class="line">CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">CGContextSetAllowsAntialiasing(context,true);//开启自动去锯齿</div><div class="line">CGContextSetShouldAntialias(context, true);</div></pre></td></tr></table></figure>
<ul>
<li>iOS线程<blockquote>
<p>一般来说，队列可分为两种类型：串行和并行。也可以分为系统队列和用户队列两种</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>串行：<br>dispatch_get_main_queue() 主线程队列，在主线程中执行<br>dispatch_queue_create(DISPATCH_QUEUE_SERIAL) 自定义串行队列<br>并行：<br>dispatch_get_global_queue() 由系统维护的并行队列<br>dispatch_queue_create(DISPATCH_QUEUE_CONCURRENT) 自定义并发队列</p>
<p>This function is the fundamental mechanism for submitting blocks to a dispatch queue. Calls to this function always return immediately after the block has been submitted and never wait for the block to be invoked. The target queue determines whether the block is invoked serially or concurrently with respect to other blocks submitted to that same queue. Independent serial queues are processed concurrently with respect to each other.</p>
<p>该函数为向dispatch队列中提交block对象的最基础的机制。调用这个接口后将block提交后会马上返回，并不会等待block被调用。参数queue决定block对象是被串行执行还是并行执行。不同的串行队列将被并行处理。</p>
</blockquote>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//在主线程执行一个block</div><div class="line">  dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">      NSLog(@&quot;invoke in main thread.&quot;);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  //异步执行一个block</div><div class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</div><div class="line">        NSLog(@&quot;invoke in another thread which is in system thread pool.&quot;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<ul>
<li>UIbutton图片和文字默认偏移（上下）<br>注意：传入需要设置的Button和文字和图片之间的垂直距离即可。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">+ (void)setButtonImageAndTitleVerticalCenterWithSpace:(CGFloat)space button:(UIButton *)button</div><div class="line">&#123;</div><div class="line">    CGSize imageSize = button.imageView.frame.size;</div><div class="line">    CGSize titleSize = [button.titleLabel.text sizeWithAttributes:@&#123;NSFontAttributeName:[UIFont systemFontOfSize:12]&#125;];</div><div class="line">    CGFloat totalHeight = (imageSize.height + titleSize.height + space);</div><div class="line">    button.imageEdgeInsets = UIEdgeInsetsMake(- (totalHeight - imageSize.height), 0.0, 0.0, - titleSize.width);</div><div class="line">    button.titleEdgeInsets = UIEdgeInsetsMake(0.0, - imageSize.width, - (totalHeight - titleSize.height),0.0);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断设置是否越狱</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">+ (BOOL)isJailbroken &#123;</div><div class="line">    BOOL jailbroken = NO;</div><div class="line">    NSString *cydiaPath = @&quot;/Applications/Cydia.app&quot;;</div><div class="line">    NSString *aptPath = @&quot;/private/var/lib/apt/&quot;;</div><div class="line">    if ([[NSFileManager defaultManager] fileExistsAtPath:cydiaPath]) &#123;</div><div class="line">        jailbroken = YES;</div><div class="line">    &#125;</div><div class="line">    if ([[NSFileManager defaultManager] fileExistsAtPath:aptPath]) &#123;</div><div class="line">        jailbroken = YES;</div><div class="line">    &#125;</div><div class="line">    return jailbroken;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断是否是数字</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (BOOL) validateNumber: (NSString *) number&#123;</div><div class="line">    NSString *reg = @&quot;^[0-9]*$&quot;;</div><div class="line">    NSPredicate *numberTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, reg];</div><div class="line">    return [numberTest evaluateWithObject:number];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断是否是字符（a-z）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (BOOL)validata:(NSString *)number&#123;</div><div class="line">    NSString *regex = @&quot;[A-Za-z]+&quot;;</div><div class="line">    NSPredicate *numberTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, regex];</div><div class="line">    return [numberTest evaluateWithObject:number];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取当前任务占用的内存</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+ (double)usedMemory</div><div class="line">&#123;</div><div class="line">    task_basic_info_data_t taskInfo;</div><div class="line">    mach_msg_type_number_t infoCount = TASK_BASIC_INFO_COUNT;</div><div class="line">    kern_return_t kernReturn = task_info(mach_task_self(),</div><div class="line">                                         TASK_BASIC_INFO, (task_info_t)&amp;taskInfo, &amp;infoCount);</div><div class="line">    if(kernReturn != KERN_SUCCESS) &#123;</div><div class="line">        return NSNotFound;</div><div class="line">    &#125;</div><div class="line">    return taskInfo.resident_size / 1024.0 / 1024.0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取中英文混合字符串的长度</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">+ (int)convertToInt:(NSString*)strtemp</div><div class="line">&#123;</div><div class="line">    int strlength = 0;</div><div class="line">    char* p = (char*)[strtemp cStringUsingEncoding:NSUnicodeStringEncoding];</div><div class="line">    for (int i=0 ; i&lt;[strtemp lengthOfBytesUsingEncoding:NSUnicodeStringEncoding] ;i++) &#123;</div><div class="line">        if (*p) &#123;</div><div class="line">            p++;</div><div class="line">            strlength++;</div><div class="line">        &#125;</div><div class="line">        else &#123;</div><div class="line">            p++;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    return strlength;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取字节长度</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">+(NSUInteger) unicodeLengthOfString: (NSString *) text &#123;</div><div class="line">    NSUInteger asciiLength = 0;</div><div class="line"></div><div class="line">    for (NSUInteger i = 0; i &lt; text.length; i++) &#123;</div><div class="line">        unichar uc = [text characterAtIndex: i];</div><div class="line">        asciiLength += isascii(uc) ? 1 : 2;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    NSUInteger unicodeLength = asciiLength / 2;</div><div class="line"></div><div class="line">    if(asciiLength % 2) &#123;</div><div class="line">        unicodeLength++;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return unicodeLength;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取app的沙盒路径</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)documentPath</div><div class="line">&#123;</div><div class="line">    // 获取应用程序沙盒的Documents目录</div><div class="line">    NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);</div><div class="line">    return [paths objectAtIndex:0];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>为Button绘制背景图片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">+ (void)backgroundTurnRedForButton:(UIButton *)button red:(CGFloat)red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha  type:(int) type&#123;</div><div class="line">    CGSize size = button.frame.size;</div><div class="line">    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];</div><div class="line">    view.layer.cornerRadius = 6;</div><div class="line">    view.clipsToBounds = true;</div><div class="line">    view.backgroundColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];</div><div class="line">    UIGraphicsBeginImageContext(size);</div><div class="line">    [view.layer renderInContext:UIGraphicsGetCurrentContext()];</div><div class="line"></div><div class="line">    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    switch (type) &#123;</div><div class="line">        case 0:</div><div class="line">            [button setBackgroundImage:screenImage forState:UIControlStateNormal];</div><div class="line">            break;</div><div class="line">        case 1:</div><div class="line">            [button setBackgroundImage:screenImage forState:UIControlStateHighlighted];</div><div class="line">            break;</div><div class="line">        default:</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断空字符串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">+(BOOL) isEmptyOrNull:(NSString *) str &#123;</div><div class="line">    if (!str) &#123;</div><div class="line">        // null object</div><div class="line">        return YES;</div><div class="line">    &#125; else &#123;</div><div class="line">        NSString *trimedString = [str stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];</div><div class="line">        if ([trimedString length] == 0) &#123;</div><div class="line">            // empty string</div><div class="line">            return YES;</div><div class="line">        &#125; else &#123;</div><div class="line">            // is neither empty nor null</div><div class="line">            return NO;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断单个文件大小</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+(long long)fileSizeAtPath:(NSString*)filePath&#123;</div><div class="line">    NSFileManager* manager = [NSFileManager defaultManager];</div><div class="line">    if ([manager fileExistsAtPath:filePath])&#123;</div><div class="line">        return [[manager attributesOfItemAtPath:filePath error:nil] fileSize];</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取视频第一帧</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">+(UIImage *)getPreViewImg:(NSString *)url</div><div class="line">&#123;</div><div class="line">    UIImage *img = nil;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        NSURL *urlvideo = nil;</div><div class="line"></div><div class="line">        if([url hasPrefix:@&quot;assets-library:&quot;] ) &#123;</div><div class="line">            urlvideo = [NSURL URLWithString:url];</div><div class="line">        &#125;else&#123;</div><div class="line">            urlvideo = [[NSURL alloc]initFileURLWithPath:url];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:urlvideo options:nil];</div><div class="line">        AVAssetImageGenerator *gen = [[AVAssetImageGenerator alloc] initWithAsset:asset];</div><div class="line">        gen.appliesPreferredTrackTransform = YES;</div><div class="line">        CMTime time = CMTimeMakeWithSeconds(0.0, 600);</div><div class="line">        NSError *error = nil;</div><div class="line">        CMTime actualTime;</div><div class="line">        CGImageRef image = [gen copyCGImageAtTime:time actualTime:&amp;actualTime error:&amp;error];</div><div class="line">        img = [[UIImage alloc] initWithCGImage:image];</div><div class="line">        CGImageRelease(image);</div><div class="line">    &#125;</div><div class="line">    return img;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取本机IP</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)getIPAddress</div><div class="line">&#123;</div><div class="line"></div><div class="line">    NSString *address = @&quot;error&quot;;</div><div class="line">    struct ifaddrs *interfaces = NULL;</div><div class="line">    struct ifaddrs *temp_addr = NULL;</div><div class="line">    int success = 0;</div><div class="line"></div><div class="line">    // retrieve the current interfaces - returns 0 on success</div><div class="line">    success = getifaddrs(&amp;interfaces);</div><div class="line">    if (success == 0) &#123;</div><div class="line">        // Loop through linked list of interfaces</div><div class="line">        temp_addr = interfaces;</div><div class="line">        while (temp_addr != NULL) &#123;</div><div class="line">            if( temp_addr-&gt;ifa_addr-&gt;sa_family == AF_INET) &#123;</div><div class="line">                // Check if interface is en0 which is the wifi connection on the iPhone</div><div class="line">                if ([[NSString stringWithUTF8String:temp_addr-&gt;ifa_name] isEqualToString:@&quot;en0&quot;]) &#123;</div><div class="line">                    // Get NSString from C String</div><div class="line">                    address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr-&gt;ifa_addr)-&gt;sin_addr)];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            temp_addr = temp_addr-&gt;ifa_next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Free memory</div><div class="line">    freeifaddrs(interfaces);</div><div class="line"></div><div class="line">    return address;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取系统字体</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+ (UIFont*)getCurrentFont</div><div class="line">&#123;</div><div class="line">    //判断系统字体的size，返回使用的字体。</div><div class="line">    UIFont *font = [UIFont systemFontOfSize:[UIFont systemFontSize]];</div><div class="line">    return font;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>比对与当前时间的天数差</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">*</div><div class="line"> *对比两个时间</div><div class="line"> *date:需要跟当前时间对比的时间</div><div class="line"> */</div><div class="line">+ (int)getTimedif:(NSDate*)date</div><div class="line">&#123;</div><div class="line">    int num = 0;</div><div class="line">    if (!date) &#123;</div><div class="line">        return num;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    NSCalendar *calendar = [NSCalendar currentCalendar];</div><div class="line">    NSDateComponents *components = [calendar components:NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:[NSDate date]];</div><div class="line">    NSDateComponents *dtComponents = [calendar components:NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:date];</div><div class="line">    num = [components day] - [dtComponents day];</div><div class="line">    return num;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>颜色</p>
</blockquote>
<ul>
<li>色值转换（#2324512z转UIColor）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">+ (UIColor *)hexString:(NSString *)hex&#123;</div><div class="line">    hex = [hex stringByReplacingOccurrencesOfString:@&quot;#&quot; withString:@&quot;&quot;];</div><div class="line">    if (hex.length&lt;6) &#123;</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    unsigned int r,g,b;</div><div class="line">    NSRange stringRange;</div><div class="line"></div><div class="line">    stringRange.length = 2;</div><div class="line">    stringRange.location = 0;</div><div class="line">    [[NSScanner scannerWithString:[hex substringWithRange:stringRange]] scanHexInt:&amp;r];</div><div class="line"></div><div class="line">    stringRange.location = 2;</div><div class="line">    [[NSScanner scannerWithString:[hex substringWithRange:stringRange]] scanHexInt:&amp;g];</div><div class="line"></div><div class="line">    stringRange.location = 4;</div><div class="line">    [[NSScanner scannerWithString:[hex substringWithRange:stringRange]] scanHexInt:&amp;b];</div><div class="line"></div><div class="line">	float fr = (r * 1.0f) / 255.0f;</div><div class="line">	float fg = (g * 1.0f) / 255.0f;</div><div class="line">	float fb = (b * 1.0f) / 255.0f;</div><div class="line"></div><div class="line">	return [UIColor colorWithRed:fr green:fg blue:fb alpha:1.0f];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>通过颜色设置图片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">+ (UIImage *)createImageWithColor:(UIColor *)color</div><div class="line">&#123;</div><div class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</div><div class="line">    UIGraphicsBeginImageContext(rect.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</div><div class="line">    CGContextFillRect(context, rect);</div><div class="line">    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    return theImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>通过颜色设置图片（有高度）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (UIImage*) GetImageWithColor:(UIColor*)color andHeight:(CGFloat)height</div><div class="line">&#123;</div><div class="line">    CGRect r= CGRectMake(0.0f, 0.0f, 1.0f, height);</div><div class="line">    UIGraphicsBeginImageContext(r.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</div><div class="line">    CGContextFillRect(context, r);</div><div class="line">    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    return img;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>图片处理</p>
</blockquote>
<ul>
<li>裁剪图片为圆形</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">+(UIImage*) circleImage:(UIImage*) image withParam:(CGFloat) inset &#123;</div><div class="line">    UIGraphicsBeginImageContext(image.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetLineWidth(context, 20);</div><div class="line">    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);</div><div class="line">    CGRect rect = CGRectMake(inset, inset, image.size.width - inset * 2.0f, image.size.height - inset * 2.0f);</div><div class="line">    CGContextAddEllipseInRect(context, rect);</div><div class="line">    CGContextClip(context);</div><div class="line"></div><div class="line">    [image drawInRect:rect];</div><div class="line">    CGContextAddEllipseInRect(context, rect);</div><div class="line">    CGContextStrokePath(context);</div><div class="line">    UIImage *newimg = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    return newimg;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>为图片添加圆角显示</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//给图片添加圆角显示</div><div class="line">+ (UIImage *) roundCorners: (UIImage*) img</div><div class="line">&#123;</div><div class="line">    int w = img.size.width;</div><div class="line">    int h = img.size.height;</div><div class="line"></div><div class="line">    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();</div><div class="line">    CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);</div><div class="line"></div><div class="line">    CGContextBeginPath(context);</div><div class="line">    CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);</div><div class="line">    addRoundedRectToPath(context, rect, 10, 10);</div><div class="line">    CGContextClosePath(context);</div><div class="line">    CGContextClip(context);</div><div class="line"></div><div class="line">    CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);</div><div class="line"></div><div class="line">    CGImageRef imageMasked = CGBitmapContextCreateImage(context);</div><div class="line">    CGContextRelease(context);</div><div class="line">    CGColorSpaceRelease(colorSpace);</div><div class="line">    UIImage *images = [UIImage imageWithCGImage:imageMasked];</div><div class="line">    CGImageRelease(imageMasked);</div><div class="line">    return images;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>将图片转换为黑白</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">+ (UIImage*)blackAndWhitePhoto:(UIImage*)anImage</div><div class="line">&#123;</div><div class="line"></div><div class="line">    CGImageRef imageRef = anImage.CGImage;</div><div class="line"></div><div class="line">    size_t width  = CGImageGetWidth(imageRef);</div><div class="line">    size_t height = CGImageGetHeight(imageRef);</div><div class="line"></div><div class="line">    size_t bitsPerComponent = CGImageGetBitsPerComponent(imageRef);</div><div class="line">    size_t bitsPerPixel = CGImageGetBitsPerPixel(imageRef);</div><div class="line"></div><div class="line">    size_t bytesPerRow = CGImageGetBytesPerRow(imageRef);</div><div class="line"></div><div class="line">    CGColorSpaceRef colorSpace = CGImageGetColorSpace(imageRef);</div><div class="line"></div><div class="line">    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imageRef);</div><div class="line"></div><div class="line"></div><div class="line">    bool shouldInterpolate = CGImageGetShouldInterpolate(imageRef);</div><div class="line"></div><div class="line">    CGColorRenderingIntent intent = CGImageGetRenderingIntent(imageRef);</div><div class="line"></div><div class="line">    CGDataProviderRef dataProvider = CGImageGetDataProvider(imageRef);</div><div class="line"></div><div class="line">    CFDataRef data = CGDataProviderCopyData(dataProvider);</div><div class="line"></div><div class="line">    UInt8 *buffer = (UInt8*)CFDataGetBytePtr(data);</div><div class="line"></div><div class="line">    NSUInteger  x, y;</div><div class="line">    for (y = 0; y &lt; height; y++) &#123;</div><div class="line">        for (x = 0; x &lt; width; x++) &#123;</div><div class="line">            UInt8 *tmp;</div><div class="line">            tmp = buffer + y * bytesPerRow + x * 4;</div><div class="line"></div><div class="line">            UInt8 red,green,blue;</div><div class="line">            red = *(tmp + 0);</div><div class="line">            green = *(tmp + 1);</div><div class="line">            blue = *(tmp + 2);</div><div class="line"></div><div class="line">            UInt8 brightness;</div><div class="line">            brightness = (77 * red + 28 * green + 151 * blue) / 256;</div><div class="line">            *(tmp + 0) = brightness;</div><div class="line">            *(tmp + 1) = brightness;</div><div class="line">            *(tmp + 2) = brightness;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    CFDataRef effectedData = CFDataCreate(NULL, buffer, CFDataGetLength(data));</div><div class="line"></div><div class="line">    CGDataProviderRef effectedDataProvider = CGDataProviderCreateWithCFData(effectedData);</div><div class="line"></div><div class="line">    CGImageRef effectedCgImage = CGImageCreate(</div><div class="line">                                               width, height,</div><div class="line">                                               bitsPerComponent, bitsPerPixel, bytesPerRow,</div><div class="line">                                               colorSpace, bitmapInfo, effectedDataProvider,</div><div class="line">                                               NULL, shouldInterpolate, intent);</div><div class="line"></div><div class="line">    UIImage *effectedImage = [[UIImage alloc] initWithCGImage:effectedCgImage];</div><div class="line"></div><div class="line">    CGImageRelease(effectedCgImage);</div><div class="line"></div><div class="line">    CFRelease(effectedDataProvider);</div><div class="line"></div><div class="line">    CFRelease(effectedData);</div><div class="line"></div><div class="line">    CFRelease(data);</div><div class="line"></div><div class="line">    return effectedImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>缓存图片到本地</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">注意：需要指定缓存路径，获取到本地沙盒路径等。</div><div class="line">+ (void)saveImageimageData:(NSData *)imgData</div><div class="line">&#123;</div><div class="line">    NSString *path = @&quot;chat/Image_send/&quot;;</div><div class="line">    if (![[NSFileManager defaultManager]fileExistsAtPath:[[LX_Sandbox docPath] stringByAppendingPathComponent:path]])</div><div class="line">        [[NSFileManager defaultManager]createDirectoryAtPath:[[LX_Sandbox docPath]stringByAppendingPathComponent:path] withIntermediateDirectories:YES attributes:nil error:nil];</div><div class="line"></div><div class="line">    NSString *imgPath = [[[LX_Sandbox docPath]stringByAppendingPathComponent:path]stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;%@.png&quot;,[Function getSendMessageTime]]];</div><div class="line">    if ([[NSFileManager defaultManager]fileExistsAtPath:imgPath]) &#123;</div><div class="line">        [[NSFileManager defaultManager]removeItemAtPath:imgPath error:nil];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if ([[NSFileManager defaultManager]createFileAtPath:imgPath contents:nil attributes:nil]) &#123;</div><div class="line">        [imgData writeToFile:imgPath  atomically:YES];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>图片裁剪（传入Rect）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+(UIImage *)imageCropping:(UIImage*)image  rect:(CGRect)rect&#123;</div><div class="line"></div><div class="line">    CGImageRef cr = CGImageCreateWithImageInRect([image CGImage], rect);</div><div class="line">	UIImage *cropped = [UIImage imageWithCGImage:cr];</div><div class="line">	CGImageRelease(cr);</div><div class="line">    return cropped;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>按尺寸压缩图片</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">+ (UIImage*)scaleFromImage:(UIImage*)image scaledToSize:(CGSize)newSize</div><div class="line">&#123;</div><div class="line">    UIImage* newImage = nil;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        CGSize  imageSize = image.size;</div><div class="line">        CGFloat width = imageSize.width;</div><div class="line">        CGFloat height = imageSize.height;</div><div class="line"></div><div class="line">        if(width &lt;= newSize.width &amp;&amp; height &lt;= newSize.height)&#123;</div><div class="line">            return image;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if(width == 0 || height == 0)&#123;</div><div class="line">            return image;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        CGFloat widthFactor = newSize.width / width;</div><div class="line">        CGFloat heightFactor = newSize.height / height;</div><div class="line">        CGFloat scaleFactor = (widthFactor&lt;heightFactor?widthFactor:heightFactor);</div><div class="line"></div><div class="line">        CGFloat scaledWidth = width * scaleFactor;</div><div class="line">        CGFloat scaledHeight = height * scaleFactor;</div><div class="line">        CGSize  targetSize = CGSizeMake(scaledWidth,scaledHeight);</div><div class="line"></div><div class="line">        UIGraphicsBeginImageContext(targetSize);</div><div class="line">        [image drawInRect:CGRectMake(0,0,targetSize.width,targetSize.height)];</div><div class="line">        newImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">        UIGraphicsEndImageContext();</div><div class="line">    &#125;</div><div class="line">    return newImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>UIImage两种加载方式比较<br>在iOS中根据图片名或路径加载image方式就两种，<code>imageNamed</code>和<code>imageWithContentsOfFile</code>，今天主要说下这两者区别。</li>
</ul>
<blockquote>
<p>imageNamed加载图片会在内存中开辟空间对数据进行缓存，但是当APP内存警告时，不会主动对销毁这部分内存，所以针对多处使用同一个图片来说性能占优。<br>imageWithContentsOfFile则是根据图片路径（全路径）去加载，不会建立缓存，在APP内存警告时会自动销毁这部分内存，所以内存占用占优。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//imageWithContentsOfFile使用方法</div><div class="line">+ (UIImage *)getImageWithSourceOfPath:(NSString *)imageName&#123;</div><div class="line">    if (imageName.length == 0 || imageName == nil) &#123;</div><div class="line">        return [[UIImage alloc]init];</div><div class="line">    &#125;</div><div class="line">    UIImage *image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:imageName ofType:@&quot;png&quot;]];</div><div class="line">    return image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/06/05/swift实现手势解锁绘制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/swift实现手势解锁绘制/" itemprop="url">iOS实现手势解锁绘制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T17:52:30+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术分享/" itemprop="url" rel="index">
                    <span itemprop="name">技术分享</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>近期增加了object-c的具体应用，包括手势绘制，验证，更新，以及处理了一些手势绘制过程中Bug。详情见object-c实现。</p>
</blockquote>
<ul>
<li>一、swift实现</li>
</ul>
<p>使用swift实现iOS手势锁屏，虽然在iOS客户端很少使用到滑动手势，但是有时候为了和安卓应用保持用户交互的一致性，所以有的时候还是很有必要的。<br>iOS客户端解锁建议使用touch ID。</p>
<p>swift与object-c的CGContextRef不一样，在swift中统一使用CGContext进行管理和使用。</p>
<p>本示例采用9*button进行绘制，关闭button交互事件，通过touchesBegan系列方法对滑动路径进行跟踪和绘制（imageView）。</p>
<p>以下为全部代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line">import UIKit</div><div class="line"></div><div class="line">  class TouchPasswordViewController: UIViewController &#123;</div><div class="line"></div><div class="line">    let screenWidth : CGFloat = UIScreen.main.bounds.size.width;</div><div class="line">    let screenHeight : CGFloat = UIScreen.main.bounds.size.height;</div><div class="line"></div><div class="line">    var btnArray : NSMutableArray = NSMutableArray.init(); //btn数组</div><div class="line">    var selectToArray : NSMutableArray = NSMutableArray.init();//选中的btn数组</div><div class="line">    var startPoint : CGPoint = CGPoint.init();//起点</div><div class="line">    var endPoint : CGPoint = CGPoint.init();//终点</div><div class="line">    var imageView : UIImageView = UIImageView.init();//绘制的背景</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    override func viewDidLoad() &#123;</div><div class="line">        super.viewDidLoad()</div><div class="line">        self.view.backgroundColor = UIColor.white;</div><div class="line"></div><div class="line">        imageView = UIImageView.init(frame: CGRect.init(x: 0, y: 0, width: screenWidth, height: screenHeight));</div><div class="line">        self.view.addSubview(imageView);</div><div class="line"></div><div class="line">        for i in 0...2 &#123;</div><div class="line">            for j in 0...2 &#123;</div><div class="line">                let btn : UIButton = UIButton.init(type: UIButtonType.custom);</div><div class="line">                btn.frame = CGRect.init(x: screenWidth / 12 + screenWidth / 3 * CGFloat(j), y: screenHeight / 3 + screenWidth / 3 * CGFloat(i), width: screenWidth / 6, height: screenWidth / 6);</div><div class="line"></div><div class="line">                btn.setImage(UIImage.init(named: &quot;尼罗河-4&quot;), for: UIControlState.normal);</div><div class="line">                btn.setImage(UIImage.init(named: &quot;尼罗河&quot;), for: UIControlState.selected);</div><div class="line">                btn.isUserInteractionEnabled = false;//取消button的交互事件，否则touch会被截断。</div><div class="line">                btnArray.add(btn);</div><div class="line">                imageView.addSubview(btn);</div><div class="line"></div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    func drawLine() -&gt; (UIImage)&#123;</div><div class="line">        var img : UIImage = UIImage.init();</div><div class="line">        let color : UIColor = UIColor.init(red: 1, green: 0, blue: 0, alpha: 1);</div><div class="line"></div><div class="line">        //绘制线条路径</div><div class="line">        UIGraphicsBeginImageContext(imageView.frame.size);</div><div class="line">        let context = UIGraphicsGetCurrentContext();</div><div class="line">        context?.setLineWidth(5);</div><div class="line">        context?.setStrokeColor(color.cgColor);</div><div class="line">        context?.move(to: startPoint);</div><div class="line"></div><div class="line">        for b in selectToArray &#123;</div><div class="line">            let btn : UIButton = b as! UIButton;</div><div class="line">            let btnPit = btn.center;</div><div class="line"></div><div class="line">            context?.addLine(to: btnPit);</div><div class="line">            context?.move(to: btnPit);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        context?.addLine(to: endPoint);</div><div class="line">        context?.strokePath();</div><div class="line"></div><div class="line">        img = UIGraphicsGetImageFromCurrentImageContext()!;</div><div class="line">        UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">        return img;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    override func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) &#123;</div><div class="line">        let touch : UITouch = touches.first!;</div><div class="line">        for b in btnArray &#123;</div><div class="line">            let btn : UIButton = b as! UIButton;</div><div class="line">            let btnPit : CGPoint = touch.location(in: btn);</div><div class="line">            if btn.point(inside: btnPit, with: nil) &#123;//判断当前touch是否btn范围内，在则存入selectArray 并改变button状态</div><div class="line">                selectToArray.add(btn);</div><div class="line">                btn.isHighlighted = true;</div><div class="line">                startPoint = btn.center;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    override func touchesMoved(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) &#123;</div><div class="line">        let touch : UITouch = touches.first!;</div><div class="line">        endPoint = touch.location(in: imageView);</div><div class="line"></div><div class="line">        for b in btnArray &#123;</div><div class="line">            let btn : UIButton = b as! UIButton;</div><div class="line">            let po : CGPoint = touch.location(in: btn);</div><div class="line"></div><div class="line">            if btn.point(inside: po, with: nil) &#123;</div><div class="line">                var isAdd : Bool = true;</div><div class="line"></div><div class="line">                for b in selectToArray &#123;</div><div class="line">                    let selectBtn : UIButton = b as! UIButton;</div><div class="line">                    if selectBtn == btn &#123;</div><div class="line">                        isAdd = false;</div><div class="line">                        break;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                if isAdd &#123;</div><div class="line">                    selectToArray.add(btn);</div><div class="line">                    btn.isHighlighted = true;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        imageView.image = self.drawLine();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) &#123;</div><div class="line">        imageView.image = nil;</div><div class="line">        selectToArray.removeAllObjects();</div><div class="line"></div><div class="line">        for b in btnArray &#123;</div><div class="line">            let btn : UIButton = b as! UIButton;</div><div class="line">            btn.isHighlighted = false;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    override func didReceiveMemoryWarning() &#123;</div><div class="line">        super.didReceiveMemoryWarning()</div><div class="line">        // Dispose of any resources that can be recreated.</div><div class="line">    &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>二、object-c实现<blockquote>
<p>object-c实现与swift逻辑一致，只是加入在实际使用过程中遇到的问题，使其更有参考性和实际应用价值。<br>注：代码中有部分资源是中英文适配使用的。如：NSLocalizedString</p>
</blockquote>
</li>
</ul>
<p>在object-c中考虑到屏幕适配会导致button图片拉伸，所以使用UIView代替UIButton。自定义了一个UIView.<br>1、RoundRectView.h</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line"></div><div class="line">@interface RoundRectView : UIView</div><div class="line">@property (nonatomic, strong) UIView *selectView;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>2、RoundRectView.m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">#import &quot;RoundRectView.h&quot;</div><div class="line">#import &quot;SysConfig.h&quot;</div><div class="line"></div><div class="line">@interface RoundRectView ()</div><div class="line">&#123;</div><div class="line">    CGFloat _width;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation RoundRectView</div><div class="line"></div><div class="line">- (instancetype)initWithFrame:(CGRect)frame</div><div class="line">&#123;</div><div class="line">    self = [super initWithFrame:frame];</div><div class="line">    if (self) &#123;</div><div class="line">        _width = frame.size.width / 4.0;</div><div class="line">        [self initUI];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)initUI&#123;</div><div class="line">    self.backgroundColor = [UIColor whiteColor];</div><div class="line">    self.layer.masksToBounds = YES;</div><div class="line">    self.layer.cornerRadius = self.frame.size.width/ 2.0;</div><div class="line">    self.layer.borderWidth = 2.0;</div><div class="line">    self.layer.borderColor = [UIColor hexString:@&quot;#3fb8c8&quot;].CGColor;</div><div class="line"></div><div class="line">    self.selectView = [[UIView alloc] initWithFrame:CGRectMake((self.frame.size.width - _width) / 2, (self.frame.size.width - _width) / 2, _width, _width)];</div><div class="line">    self.selectView.backgroundColor = [UIColor hexString:@&quot;#3fb8c8&quot;];</div><div class="line">    self.selectView.layer.masksToBounds = YES;</div><div class="line">    self.selectView.layer.cornerRadius = _width / 2.0;</div><div class="line">    self.selectView.hidden = YES;</div><div class="line">    [self addSubview:self.selectView];  </div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>3、TouchUpViewController.h</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line">#import &quot;LXBaseViewController.h&quot;</div><div class="line"></div><div class="line">typedef enum : NSUInteger &#123;</div><div class="line">    TouchUnlockCreatePwd,//绘制</div><div class="line">    TouchUnlockValidatePwd,//验证</div><div class="line">    TouchUnlockUpdatePwd,//修改手势</div><div class="line">&#125; UnlockType;</div><div class="line"></div><div class="line">@interface TouchUpViewController : LXBaseViewController</div><div class="line"></div><div class="line">- (instancetype)initWithUnlockType:(UnlockType)type;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>4、TouchUpViewController.m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div></pre></td><td class="code"><pre><div class="line">#import &quot;TouchUpViewController.h&quot;</div><div class="line">#import &quot;RoundRectView.h&quot;</div><div class="line">#import &quot;SysConfig.h&quot;</div><div class="line">#import &quot;AppDelegate.h&quot;</div><div class="line">#import &quot;LXNetworkRequest.h&quot;</div><div class="line">#import &quot;LXNetworkRequest+LogWithEmail.h&quot;</div><div class="line"></div><div class="line">#define APPDELEGATEREAL (AppDelegate *)[UIApplication sharedApplication].delegate</div><div class="line">#define TouchUnlockPwdKey  @&quot;touchUnlockPwdKey&quot;</div><div class="line"></div><div class="line">@interface TouchUpViewController ()</div><div class="line">&#123;</div><div class="line">    NSMutableArray *_nomarlArray,*_selectArray;</div><div class="line">    CGFloat _width,_height;</div><div class="line">    UIImageView *_imageView;</div><div class="line">    CGPoint _startPoint,_endPoint;</div><div class="line">    NSMutableString *_password;</div><div class="line">    NSString *_oldPassword;</div><div class="line">    UnlockType _unlockType;</div><div class="line">    NSInteger _errorCount;</div><div class="line"></div><div class="line">    UIImageView *_headerImageView;</div><div class="line">    UILabel *_nickNameLabel,*_tipLabel;</div><div class="line">    UIButton *_loginBtn;</div><div class="line"></div><div class="line">    BOOL isUpdatePwd;</div><div class="line"></div><div class="line">    NSInteger _steps;//1 验证密码 2：创建第一遍   3：创建第二遍</div><div class="line">&#125;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation TouchUpViewController</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    self.title = NSLocalizedString(@&quot;Draw Pattern&quot;, nil);</div><div class="line">    self.view.backgroundColor = [UIColor whiteColor];</div><div class="line">    [self initUI];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)comeBack:(id)sender</div><div class="line">&#123;</div><div class="line">    [self.navigationController popViewControllerAnimated:YES];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (instancetype)initWithUnlockType:(UnlockType)type&#123;</div><div class="line"></div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        _unlockType = type;</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)initUI&#123;</div><div class="line"></div><div class="line">    NSUserDefaults *def = [NSUserDefaults standardUserDefaults];</div><div class="line">    NSString *savePwd = [def objectForKey:TouchUnlockPwdKey];</div><div class="line"></div><div class="line">    _width = [UIScreen mainScreen].bounds.size.width;</div><div class="line">    _height = [UIScreen mainScreen].bounds.size.height;</div><div class="line"></div><div class="line">    _password = [NSMutableString string];</div><div class="line">    _nomarlArray = [NSMutableArray array];</div><div class="line">    _selectArray = [NSMutableArray array];</div><div class="line"></div><div class="line">    _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, _width, _height)];</div><div class="line">    [self.view addSubview:_imageView];</div><div class="line"></div><div class="line"></div><div class="line">    CGFloat leftSpace = fitScreenWidth(40);</div><div class="line">    CGFloat wd = (_width - leftSpace * 2) /8.0;</div><div class="line"></div><div class="line">    NSInteger index = 1;</div><div class="line">    for (int i = 0; i &lt; 3; i ++) &#123;</div><div class="line">        for (int j = 0; j &lt; 3; j ++) &#123;</div><div class="line"></div><div class="line">            CGRect rect = CGRectMake(leftSpace + wd * 3 * j, _height / 3.0 + wd * 3 * i, wd * 2, wd * 2);</div><div class="line">            RoundRectView *ve = [[RoundRectView alloc] initWithFrame:rect];</div><div class="line"></div><div class="line">            ve.tag = index ++;</div><div class="line"></div><div class="line">            [_nomarlArray addObject:ve];</div><div class="line">            [_imageView addSubview:ve];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    //    -   -  -  - -  header - - - - - - -  - -</div><div class="line">    _headerImageView = [[UIImageView alloc] initWithFrame:CGRectMake((_width - fitScreenWidth(50)) / 2, fitScreenWidth(60), fitScreenWidth(50), fitScreenWidth(50))];</div><div class="line">    _headerImageView.backgroundColor = [UIColor whiteColor];</div><div class="line">    [self.view addSubview:_headerImageView];</div><div class="line"></div><div class="line">    _nickNameLabel = [[UILabel alloc] initWithFrame:CGRectMake((_width - fitScreenWidth(100)) / 2, CGRectGetMaxY(_headerImageView.frame), fitScreenWidth(100), fitScreenWidth(25))];</div><div class="line">    _nickNameLabel.font = [UIFont systemFontOfSize:fitScreenWidth(12.0)];</div><div class="line">    _nickNameLabel.hidden = YES;</div><div class="line">    _nickNameLabel.textAlignment = NSTextAlignmentCenter;</div><div class="line">    [self.view addSubview:_nickNameLabel];</div><div class="line"></div><div class="line">    _tipLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, CGRectGetMaxY(_nickNameLabel.frame), _width - 20 * 2, fitScreenWidth(25))];</div><div class="line">    _tipLabel.font = [UIFont systemFontOfSize:fitScreenWidth(13.0)];</div><div class="line">    _tipLabel.textAlignment = NSTextAlignmentCenter;</div><div class="line">    _tipLabel.textColor = [UIColor lightGrayColor];</div><div class="line">    [self.view addSubview:_tipLabel];</div><div class="line"></div><div class="line"></div><div class="line">    _loginBtn = [[UIButton alloc] initWithFrame:CGRectMake((_width - fitScreenWidth(150)) / 2 , _height - fitScreenWidth(55), fitScreenWidth(150), 30)];</div><div class="line">    _loginBtn.titleLabel.font = [UIFont systemFontOfSize:fitScreenWidth(13.0)];</div><div class="line"></div><div class="line">    [_loginBtn setTitle:NSLocalizedString(@&quot;Use login password&quot;, nil) forState:UIControlStateNormal];</div><div class="line">    [_loginBtn setTitleColor:[UIColor hexString:@&quot;#3fb8c8&quot;] forState:UIControlStateNormal];</div><div class="line">    [_loginBtn setHidden:YES];</div><div class="line">    [_loginBtn addTarget:self action:@selector(loginWithPwd) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    [self.view addSubview:_loginBtn];</div><div class="line"></div><div class="line"></div><div class="line">    UIBarButtonItem *resetBtn = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@&quot;Reset&quot;, nil) style:UIBarButtonItemStylePlain target:self action:@selector(resetBtnClick)];</div><div class="line">    self.navigationItem.rightBarButtonItem = resetBtn;</div><div class="line"></div><div class="line">    if (_unlockType == TouchUnlockCreatePwd) &#123;</div><div class="line">        //绘制</div><div class="line">        _steps = 2;</div><div class="line">        _tipLabel.text = NSLocalizedString(@&quot;Draw Your Pattern&quot;, nil);</div><div class="line">    &#125;</div><div class="line">    else if (_unlockType == TouchUnlockUpdatePwd)&#123;</div><div class="line">        //更新密码不验证原密码 直接新增 !savePwd || savePwd.length == 0</div><div class="line">        _unlockType = TouchUnlockCreatePwd;</div><div class="line">        _tipLabel.text = NSLocalizedString(@&quot;Draw new pattern&quot;, nil);</div><div class="line">        _steps = 2;</div><div class="line">    &#125;</div><div class="line">    else if (_unlockType == TouchUnlockValidatePwd)&#123;</div><div class="line">        //验证密码</div><div class="line">        _steps = 1;</div><div class="line">        _errorCount = 5;</div><div class="line">        [_loginBtn setHidden:NO];</div><div class="line">        _tipLabel.text = NSLocalizedString(@&quot;Draw Your Pattern&quot;, nil);</div><div class="line">        _headerImageView.layer.masksToBounds = YES;</div><div class="line">        _headerImageView.layer.cornerRadius = fitScreenWidth(50) / 2;</div><div class="line">        [_headerImageView setNewImageUrl:APPDELEGATE.userModel.avatar placeHolder:[UIImage imageNamed:@&quot;login_content_Avatar@2x&quot;]];</div><div class="line"></div><div class="line">        _nickNameLabel.hidden = NO;</div><div class="line">        _nickNameLabel.text = APPDELEGATE.userModel.nickname;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if ([savePwd isEqualToString:@&quot;TouchPwdError&quot;]) &#123;</div><div class="line">        //密码失效，直接弹出提示框</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [self alertPwdError];</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)changeUI:(UnlockType)type&#123;</div><div class="line">    //切换头部视图</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)changeTip:(NSInteger)index&#123;</div><div class="line">    //改变警告文字  1:最少四个点，请重新绘制  2:与上次绘制不一致，请重新绘制 3：密码错误还可以输入5次</div><div class="line">    _tipLabel.textColor = [UIColor redColor];</div><div class="line">    NSString *text = nil;</div><div class="line">    switch (index) &#123;</div><div class="line">        case 1:</div><div class="line">        &#123;</div><div class="line">            text = NSLocalizedString(@&quot;At least 4 points required&quot;, nil);</div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line"></div><div class="line">        case 2:</div><div class="line">        &#123;</div><div class="line">            text = NSLocalizedString(@&quot;Not match. Please draw it again&quot;, nil);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line"></div><div class="line">        case 3:</div><div class="line">        &#123;</div><div class="line">            text = _errorCount == 10000 ? [NSString stringWithFormat:NSLocalizedString(@&quot;Invalid password. Please draw it again&quot;, nil)] : [NSLocalizedString(@&quot;Invalid password.*** attempt(s) left&quot;, nil) stringByReplacingOccurrencesOfString:@&quot;***&quot; withString:[NSString stringWithFormat:@&quot;%ld&quot;,_errorCount -- &gt; 0 ? _errorCount : 0]];</div><div class="line">        &#125;</div><div class="line">            break;</div><div class="line"></div><div class="line"></div><div class="line">        default:</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    _tipLabel.text = text;</div><div class="line"></div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line"></div><div class="line">        if (_unlockType == TouchUnlockCreatePwd) &#123;</div><div class="line">            if (_steps == 2) &#123;</div><div class="line">                [self changeTipForNormal:1];</div><div class="line">            &#125;</div><div class="line">            else if (_steps == 3)&#123;</div><div class="line">                [self changeTipForNormal:3];</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        [self changeTipForNormal:1];</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)changeTipForNormal:(NSInteger)index&#123;</div><div class="line">    _tipLabel.textColor = [UIColor lightGrayColor];</div><div class="line">    NSString *text = @&quot;&quot;;</div><div class="line">    switch (index) &#123;</div><div class="line">        case 1:</div><div class="line">            text = NSLocalizedString(@&quot;Draw Your Pattern&quot;, nil);</div><div class="line">            break;</div><div class="line">        case 2:</div><div class="line">            text = @&quot;请输入原手势密码&quot;;</div><div class="line">            break;</div><div class="line">        case 3:</div><div class="line">            text = NSLocalizedString(@&quot;Draw pattern again&quot;, nil);</div><div class="line">            break;</div><div class="line">        case 4:</div><div class="line">            text = NSLocalizedString(@&quot;Draw Your Pattern&quot;, nil);</div><div class="line">            break;</div><div class="line"></div><div class="line">        default:</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">    _tipLabel.text = text;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (UIImage *)drawline&#123;</div><div class="line"></div><div class="line">    if (_selectArray.count == 0) &#123;</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line">    RoundRectView *ve = _selectArray.firstObject;</div><div class="line">    CGPoint vePoint = ve.center;</div><div class="line">    _startPoint = vePoint;</div><div class="line"></div><div class="line">    UIImage *img = [[UIImage alloc] init];</div><div class="line">    UIColor *color = [UIColor hexString:@&quot;#3fb8c8&quot;];</div><div class="line"></div><div class="line">    UIGraphicsBeginImageContext(_imageView.frame.size);</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetAllowsAntialiasing(context,true);</div><div class="line">//    CGContextSetShouldAntialias(context, true);</div><div class="line"></div><div class="line">    CGContextSetLineWidth(context, 2);</div><div class="line">    CGContextSetStrokeColorWithColor(context, color.CGColor);</div><div class="line">    CGContextMoveToPoint(context, _startPoint.x, _startPoint.y);</div><div class="line"></div><div class="line"></div><div class="line">    if (_selectArray.count == 0) &#123;</div><div class="line">        return nil;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    for (RoundRectView *ve in _selectArray) &#123;</div><div class="line">        CGPoint po = ve.center;</div><div class="line">        CGContextAddLineToPoint(context, po.x, po.y);</div><div class="line">        CGContextMoveToPoint(context, po.x, po.y);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    CGContextAddLineToPoint(context, _endPoint.x, _endPoint.y);</div><div class="line">    CGContextStrokePath(context);</div><div class="line"></div><div class="line">    img = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line"></div><div class="line">    return img;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;</div><div class="line"></div><div class="line">    UITouch *touch = [touches anyObject];</div><div class="line">    if (touch) &#123;</div><div class="line">        for (RoundRectView *ve in _nomarlArray) &#123;</div><div class="line">            CGPoint point = [touch locationInView:ve];</div><div class="line"></div><div class="line">            if ([ve pointInside:point withEvent:nil]) &#123;</div><div class="line">                [_selectArray addObject:ve];</div><div class="line">                [self savePassWord:ve.tag];</div><div class="line">                ve.selectView.hidden = NO;</div><div class="line">                _startPoint = ve.center;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;</div><div class="line">    UITouch *touch = [touches anyObject];</div><div class="line">    if (touch) &#123;</div><div class="line">        _endPoint = [touch locationInView:_imageView];</div><div class="line"></div><div class="line">        for (RoundRectView *ve in _nomarlArray) &#123;</div><div class="line">            CGPoint point = [touch locationInView:ve];</div><div class="line"></div><div class="line">            if ([ve pointInside:point withEvent:nil]) &#123;</div><div class="line"></div><div class="line">                BOOL isAdd = YES;</div><div class="line">                for (RoundRectView *vv in _selectArray) &#123;</div><div class="line">                    if (vv == ve) &#123;</div><div class="line">                        isAdd = NO;</div><div class="line">                        break;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                if (isAdd) &#123;</div><div class="line">                    [_selectArray addObject:ve];</div><div class="line">                    [self savePassWord:ve.tag];</div><div class="line">                    ve.selectView.hidden = NO;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    _imageView.image = [self drawline];</div><div class="line">    _imageView.layer.contentsScale = [[UIScreen mainScreen] scale];</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)touchesEnded:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;</div><div class="line"></div><div class="line">    UITouch *touch = [touches anyObject];</div><div class="line">    if (touch) &#123;</div><div class="line">        for (RoundRectView *ve in _nomarlArray) &#123;</div><div class="line">            CGPoint po = [touch locationInView:ve];</div><div class="line">            if (![ve pointInside:po withEvent:nil]) &#123;</div><div class="line">                RoundRectView *seVe = _selectArray.lastObject;</div><div class="line">                _endPoint = seVe.center;</div><div class="line">                _imageView.image = [self drawline];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    [self cheakPassword];</div><div class="line"></div><div class="line">    _password = [NSMutableString string];</div><div class="line"></div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line"></div><div class="line">        _imageView.image = nil;</div><div class="line">        [_selectArray removeAllObjects];</div><div class="line"></div><div class="line">        for (RoundRectView *ve in _nomarlArray) &#123;</div><div class="line">            ve.selectView.hidden = YES;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)didReceiveMemoryWarning &#123;</div><div class="line">    [super didReceiveMemoryWarning];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)savePassWord:(NSInteger)tag&#123;</div><div class="line">    [_password appendFormat:@&quot;%ld&quot;,tag];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)cheakPassword&#123;</div><div class="line"></div><div class="line">    if (_password.length &lt; 4) &#123;</div><div class="line">        [self changeTip:1];</div><div class="line">        return; //密码长度不够</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (_unlockType == TouchUnlockCreatePwd) &#123;</div><div class="line"></div><div class="line">        if (_steps == 2) &#123;</div><div class="line">            _oldPassword = _password;</div><div class="line">            [self changeTipForNormal:3];</div><div class="line">            _steps = 3;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (_steps == 3) &#123;</div><div class="line">            if (![_password isEqualToString:_oldPassword]) &#123;</div><div class="line">                [self changeTip:2];</div><div class="line">                return; //前后不一致</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            if ([_oldPassword isEqualToString:_password]) &#123;</div><div class="line">                //两次密码一致 存本地</div><div class="line">                NSUserDefaults *def = [NSUserDefaults standardUserDefaults];</div><div class="line">                [def setObject:_password forKey:TouchUnlockPwdKey];</div><div class="line">                [MessageCenter openAlertViewWithMessage:NSLocalizedString(@&quot;Success&quot;, nil) duringtime:1];</div><div class="line">                [self.navigationController popViewControllerAnimated:YES];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    else if (_unlockType == TouchUnlockValidatePwd || _unlockType == TouchUnlockUpdatePwd)&#123;</div><div class="line">        //获取保存的密码</div><div class="line">        NSUserDefaults *def = [NSUserDefaults standardUserDefaults];</div><div class="line">        NSString *savePwd = [def objectForKey:TouchUnlockPwdKey];</div><div class="line"></div><div class="line">        if (![savePwd isEqualToString:_password] &amp;&amp; _steps == 1) &#123;</div><div class="line">            //原密码错误</div><div class="line">            _steps = 1;</div><div class="line">            [self changeTip:3];</div><div class="line"></div><div class="line">            if (_errorCount &lt;= 0) &#123;</div><div class="line">                //错误次数太多</div><div class="line">                [self alertPwdError];</div><div class="line">                return;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        //登陆成功</div><div class="line">        if (_unlockType == TouchUnlockValidatePwd) &#123;</div><div class="line"></div><div class="line">            _errorCount = 5;</div><div class="line">//            [self dismissViewControllerAnimated:YES completion:nil];</div><div class="line"></div><div class="line">            if (![APPDELEGATEREAL lockScreenWindow].hidden) &#123;</div><div class="line">                [APPDELEGATEREAL lockScreenWindow].hidden = YES;</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (_steps == 1) &#123;</div><div class="line">            [self changeTipForNormal:1];</div><div class="line">            _steps = 2;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (_steps == 2) &#123;</div><div class="line">            _oldPassword = _password;</div><div class="line">            [self changeTipForNormal:3];</div><div class="line">            _steps = 3;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (_steps == 3) &#123;</div><div class="line">            if (![_password isEqualToString:_oldPassword]) &#123;</div><div class="line">                 [self changeTip:2];</div><div class="line">                return;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            if ([_oldPassword isEqualToString:_password]) &#123;</div><div class="line">                //两次密码一致 存本地</div><div class="line">                NSUserDefaults *def = [NSUserDefaults standardUserDefaults];</div><div class="line">                [def setObject:_password forKey:TouchUnlockPwdKey];</div><div class="line"></div><div class="line">                NSLog(@&quot;密码更新成功:%@&quot;,_password);</div><div class="line">                [MessageCenter openAlertViewWithMessage:NSLocalizedString(@&quot;Success&quot;, nil) duringtime:1];</div><div class="line">                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                    [self.navigationController popViewControllerAnimated:YES];</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)alertPwdError&#123;</div><div class="line">    //手势密码失效</div><div class="line">    [[NSUserDefaults standardUserDefaults] setObject:@&quot;TouchPwdError&quot; forKey:TouchUnlockPwdKey];</div><div class="line"></div><div class="line">    UIAlertController *alert = [UIAlertController alertControllerWithTitle:NSLocalizedString(@&quot;Pattern is expired&quot;, nil) message:NSLocalizedString(@&quot;Please login with password&quot;, nil) preferredStyle:UIAlertControllerStyleAlert];</div><div class="line"></div><div class="line">    NSMutableAttributedString *alertControllerMessageStr = [[NSMutableAttributedString alloc] initWithString:NSLocalizedString(@&quot;Please login with password&quot;, nil)];</div><div class="line">    [alertControllerMessageStr addAttribute:NSForegroundColorAttributeName value:[UIColor hexString:@&quot;#999999&quot;] range:NSMakeRange(0, alertControllerMessageStr.length)];</div><div class="line">    [alertControllerMessageStr addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:12] range:NSMakeRange(0, alertControllerMessageStr.length)];</div><div class="line">    [alert setValue:alertControllerMessageStr forKey:@&quot;attributedMessage&quot;];</div><div class="line"></div><div class="line">    UIAlertAction *toAction = [UIAlertAction actionWithTitle:NSLocalizedString(@&quot;Login again&quot;, nil) style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123;</div><div class="line">        [self loginWithPwd];</div><div class="line">    &#125;];</div><div class="line">    [alert addAction:toAction];</div><div class="line">    [self presentViewController:alert animated:YES completion:nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)loginWithPwd&#123;</div><div class="line">    LX_LoginAndForgetViewController *loginVc = [[LX_LoginAndForgetViewController alloc] init];</div><div class="line">    loginVc.isTouchUnlockIn = YES;</div><div class="line">    [self presentViewController:loginVc animated:YES completion:nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//重设</div><div class="line">- (void)resetBtnClick&#123;</div><div class="line">    _oldPassword = nil;</div><div class="line">    _steps = 2;</div><div class="line">    [self changeTipForNormal:1];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>5、AppDelegate中新增UIwindow属性用于遮罩</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//didFinishLaunchingWithOptions方法加入</div><div class="line">self.lockScreenWindow = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</div><div class="line"> self.lockScreenWindow.windowLevel= UIWindowLevelAlert+1;//最高级等级窗口</div><div class="line"> self.lockScreenWindow.backgroundColor = [UIColor whiteColor];</div><div class="line"> TouchUpViewController *lockvc  =[[TouchUpViewController alloc]initWithUnlockType:TouchUnlockValidatePwd];</div><div class="line"> self.lockScreenWindow.rootViewController = lockvc;</div><div class="line"> self.lockScreenWindow.hidden = YES;</div></pre></td></tr></table></figure>
<p>在合适的时候对lockScreenWindow.hidden属性进行操作。</p>
<p>通过上述两个类，初步建立了手势密码的逻辑体系。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://he8090.cn/2017/06/05/我，“没有爱好”/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headerImage.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="靠北’s Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/我，“没有爱好”/" itemprop="url">我，“没有爱好”</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:33:42+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人随笔/" itemprop="url" rel="index">
                    <span itemprop="name">个人随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>几年我25岁了，除了日常的生活工作学习，在闲暇时间我不清楚我自己该做点什么或者去哪看看。平常工作盼着假期，而到了假期却憧憬着工作。对，这就是我，一个25岁还没有找到能够让自己快乐或者觉得有意义的事情。</p>
<p>记得，曾经也喜欢到处游走，哪怕什么都不做，看看就是好的，心里也就满足。近年来，一到假期到处都是人山人海，我也懒得去人多的地方凑热闹。这样一来一去不出门仿佛就成为了习惯，假期里除了提前说好了的，都是在家混着时间过了。</p>
<p>我尝试过去培养一些自己的兴趣爱好，比如旅旅游，拍拍照，加入一些户外俱乐部做一些户外运动或者是参加一些论坛活动。相继我也购入了单反相机来充实自己。后来才发现有一些路不适合作为兴趣，比如单反相机，器材需要耗费大量的资金，而我撑不起我的爱好，所以我选择了闲置和放弃拍照。</p>
<p>我这个人，不抽烟，少喝酒，不打游戏，所以没有可以玩的兴趣。别的人还可以钓钓鱼，逛逛酒吧，喝喝咖啡，打打麻将，我就在家闲着，闲着有时间去思考，去思考未来。</p>
<p><img src="https://raw.githubusercontent.com/misszero8090/he8090_blog/master/img/2017-06-04%20145814.jpg" alt="2017-06-04 145814"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/headerImage.png"
               alt="yao" />
          <p class="site-author-name" itemprop="name">yao</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">42</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yao</span>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  
    

    
  




  






  





  

  

  

  

  

  

</body>
</html>
